(this["webpackJsonpmusic-theory-admin"]=this["webpackJsonpmusic-theory-admin"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var a=n(25),i=n.n(a),r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var o,s,l,u,j,d,b,O,h,p,x,m,g,f,v,y,C=n(13),w=n(266),S=n(8),k=n(0),A=n.n(k),I=n(30),q=n(265),N=n(274),L=n(211),T=n(215),D=n(51),F=n(216),E=n(217),M=n(7),Q={setUserDetails:function(e,t){var n={token:e.token,user:{email:e.user.email,id:e.user.id}};sessionStorage.setItem("jwt",JSON.stringify(n)),t(!0)},unsetUserDetails:function(e){sessionStorage.removeItem("jwt"),e(!0)},isAuthenticated:function(){if("undefined"==typeof window)return!1;if(null!==sessionStorage.getItem("jwt")){var e=JSON.parse(sessionStorage.getItem("jwt"));return!(!e||!e.user)&&e}return!1}},$=n(1),B=Object(M.a)((function(){return Object(N.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"}})}))((function(e){var t=e.classes;return Object($.jsxs)(L.a,{className:t.root,children:[Object($.jsxs)(T.a,{children:[Object($.jsx)(D.a,{variant:"h1",children:"Welcome"}),Object($.jsx)("br",{}),Object($.jsx)(D.a,{variant:"body1",children:"Music Theory Admin Dashboard"})]}),Object($.jsx)(F.a,{className:t.actions,children:Q.isAuthenticated()?Object($.jsx)(E.a,{variant:"contained",color:"primary",component:C.b,"aria-label":"Button",to:"/modules",children:"Modules"}):Object($.jsx)(A.a.Fragment,{children:Object($.jsx)(E.a,{variant:"contained",color:"primary",component:C.b,"aria-label":"Button",to:"/login",children:"Login"})})})]})})),H=n(218),P=n(219),z=n(172),W=n(140),_=n(225),R=n(226),U=n(273),K=n(220),V=n(221),J={env:"production",server_url:"https://iadt-researchproject-server.herokuapp.com",ga_id:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SERVER_URL:"https://iadt-researchproject-server.herokuapp.com"}).REACT_APP_GOOGLE_ANALYTICS},Y=n(110),G=function(e){var t=e.history,n=e.isAuthed,a=e.setIsAuthed;Y.a.initialize(J.ga_id);var i=A.a.useState(""),r=Object(S.a)(i,2),c=r[0],o=r[1];Object(k.useEffect)((function(){t.listen((function(){Y.a.pageview(window.location.pathname+window.location.search)}))}),[t]);var s=A.a.useState(!1),l=Object(S.a)(s,2),u=l[0],j=l[1],d=A.a.useState(null),b=Object(S.a)(d,2),O=b[0],h=b[1],p=Boolean(O),x=function(){h(null)};return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(H.a,{position:"sticky",children:Object($.jsxs)(P.a,{style:{justifyContent:"space-between"},children:[Object($.jsx)(z.a,{"aria-label":"Home",component:C.b,to:"/",children:Object($.jsx)(K.a,{})}),n&&Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(z.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){h(e.currentTarget)},color:"inherit",children:Object($.jsx)(V.a,{})}),Object($.jsx)(W.a,{id:"menu-appbar",anchorEl:O,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:x,children:Object($.jsxs)(_.a,{disabled:u,onClick:function(){Q.isAuthenticated()?(j(!0),Q.unsetUserDetails((function(e){if(e)return a(!1),j(!1),x(),o("Logged out successfully"),t.push("/");o("The system encountered an error, please try again later")}))):(a(!1),o("The system encountered an error, please try again later"))},children:["Logout ",u&&Object($.jsx)(R.a,{size:18})]})})]})]})}),Object($.jsx)(U.a,{open:""!==c,autoHideDuration:6e3,onClose:function(){return o("")},message:c})]})},X=n(228),Z=n(227),ee=n(229),te=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4),textAlign:"center",maxWidth:"800px",margin:"0 auto"},icon:{fontSize:"3em"},header:{display:"flex",flexDirection:"column-reverse",justifyContent:"center"},iconContainer:{textAlign:"center"}})}))((function(e){var t=e.message,n=void 0===t?void 0:t,a=e.classes,i=e.action,r=void 0===i?void 0:i,c=e.actionLabel,o=void 0===c?"Try Again":c;return Object($.jsxs)(L.a,{elevation:3,className:a.wrapper,children:[Object($.jsx)("div",{className:a.iconContainer,children:Object($.jsx)(Z.a,{color:"error",className:a.icon})}),Object($.jsx)(X.a,{title:n||"There was a problem",className:a.header}),r?Object($.jsx)(E.a,{className:a.iconContainer,variant:"contained",color:"secondary",endIcon:Object($.jsx)(ee.a,{}),onClick:r,children:o}):Object($.jsx)(E.a,{component:C.b,to:"/",color:"primary",variant:"contained",children:"Home"})]})})),ne=n(267),ae=n(230),ie=n(234),re=n(11),ce=n(26),oe=Object(re.gql)(o||(o=Object(ce.a)(["\n  query getModules {\n    getModules {\n      id\n      title\n      level\n      createdAt\n      lessons {\n        id\n      }\n    }\n  }\n"]))),se=Object(re.gql)(s||(s=Object(ce.a)(["\n  query getModule($id: String!) {\n    getModule(id: $id) {\n      id\n      title\n      level\n      type\n      createdAt\n      lessons {\n        id\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]))),le=Object(re.gql)(l||(l=Object(ce.a)(["\n  mutation addModule($input: ModuleValidator!) {\n    addModule(input: $input) {\n      id\n    }\n  }\n"]))),ue=Object(re.gql)(u||(u=Object(ce.a)(["\n  mutation updateModule($id: String!, $input: ModuleValidator!) {\n    updateModule(id: $id, input: $input) {\n      id\n      title\n      level\n      type\n    }\n  }\n"]))),je=Object(re.gql)(j||(j=Object(ce.a)(["\n  mutation deleteModule($id: String!) {\n    deleteModule(id: $id)\n  }\n"]))),de=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(k.useState)(""),i=Object(S.a)(a,2),r=i[0],c=i[1],o=Object(k.useState)(0),s=Object(S.a)(o,2),l=s[0],u=s[1],j=Object(k.useState)("THEORY"),d=Object(S.a)(j,2),b=d[0],O=d[1],h=Object(k.useState)(""),p=Object(S.a)(h,2),x=p[0],m=p[1],g=Object(k.useState)(""),f=Object(S.a)(g,2),v=f[0],y=f[1],w=Object(re.useMutation)(le),I=Object(S.a)(w,2),q=I[0],N=I[1].loading,M=function(){(function(){var e=!1;return r.length<3?m("Title must be at least 3 characters"):(e=!0,m("")),e})()&&(y(""),q({variables:{input:{title:r,level:l,type:b}}}).then((function(e){t.push("/modules/true")})).catch((function(e){y(e.toString())})))};return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/",startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsxs)(L.a,{elevation:3,className:n.wrapper,children:[Object($.jsx)(X.a,{title:"Create Module"}),Object($.jsxs)(T.a,{children:[Object($.jsx)(ne.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&M()},error:""!==x,helperText:x}),Object($.jsx)(ne.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:l,onChange:function(e){return u(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&M()}}),Object($.jsx)(ne.a,{title:"type",label:"Lesson Type",margin:"normal",value:b,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&M()}}),Object($.jsx)(D.a,{variant:"caption",color:"error",children:v})]}),Object($.jsx)(F.a,{children:Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:M,disabled:N,endIcon:N?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ie.a,{}),children:"Save"})})]})]})})),be=Object(M.a)((function(){return Object(N.a)({progressWrapper:{minHeight:"-webkit-fill-available",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object($.jsx)("div",{className:t.progressWrapper,children:Object($.jsx)(R.a,{})})})),Oe=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=e.match,i=Object(k.useState)(""),r=Object(S.a)(i,2),c=r[0],o=r[1],s=Object(k.useState)(0),l=Object(S.a)(s,2),u=l[0],j=l[1],d=Object(k.useState)(""),b=Object(S.a)(d,2),O=b[0],h=b[1],p=Object(k.useState)(""),x=Object(S.a)(p,2),m=x[0],g=x[1],f=Object(k.useState)(""),v=Object(S.a)(f,2),y=v[0],w=v[1],I=a.params.id,q=Object(re.useQuery)(se,{variables:{id:I}}),N=q.loading,M=q.error,Q=q.data,B=Object(re.useMutation)(ue),H=Object(S.a)(B,2),P=H[0],z=H[1].loading,W=function(){(function(){var e=!1;return c.length<3?g("Title must be at least 3 characters"):(e=!0,g("")),e})()&&(w(""),P({variables:{id:I,input:{title:c,level:u,type:O}}}).then((function(e){t.push("/module/".concat(e.data.updateModule.id))})).catch((function(e){console.log("error",e),w(e.toString())})))};return Object(k.useEffect)((function(){Q&&Q.getModule&&(o(Q.getModule.title),j(Q.getModule.level),h(Q.getModule.type))}),[Q]),N?Object($.jsx)(be,{}):M?Object($.jsx)(te,{message:M.message}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/",startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsxs)(L.a,{elevation:3,className:n.wrapper,children:[Object($.jsx)(X.a,{title:"Edit Module"}),Object($.jsxs)(T.a,{children:[Object($.jsx)(ne.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:c,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&W()},error:""!==m,helperText:m}),Object($.jsx)(ne.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:u,onChange:function(e){return j(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&W()}}),Object($.jsx)(ne.a,{title:"type",label:"Lesson Type",margin:"normal",value:O,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&W()}}),Object($.jsx)(D.a,{variant:"caption",color:"error",children:y})]}),Object($.jsx)(F.a,{children:Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:W,disabled:N||z,endIcon:N||z?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ie.a,{}),children:"Save"})})]})]})})),he=n(245),pe=n(247),xe=n(249),me=n(224),ge=n(251),fe=n(246),ve=n(248),ye=n(242),Ce=n(252),we=n(235),Se=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object($.jsx)(we.a,{component:C.b,to:n,children:a}):Object($.jsx)("div",{children:a})},ke=n(277),Ae=n(237),Ie=n(238),qe=n(239),Ne=n(240),Le=n(241),Te=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.module,i=e.handleClose,r=A.a.useState(""),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(re.useMutation)(je),u=Object(S.a)(l,2),j=u[0],d=u[1].loading;return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsxs)(ke.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"edit-module-dialog",children:[Object($.jsx)(Ae.a,{children:"Confirmation"}),Object($.jsx)(Ie.a,{children:Object($.jsx)(qe.a,{children:"Are you sure you want to delete this module?"})}),Object($.jsxs)(Ne.a,{children:[Object($.jsx)(E.a,{color:"primary",variant:"contained",onClick:function(){return i(!1)},endIcon:Object($.jsx)(Le.a,{}),children:"Cancel"}),Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;j({variables:{id:e}}).then((function(e){if(!0===e.data.deleteModule)return t.push("/modules/true");s("Could not delete Module")})).catch((function(e){s(e.toString())}))},disabled:d,endIcon:d?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ye.a,{}),children:"Confirm"})]})]}),Object($.jsx)(U.a,{open:""!==o,autoHideDuration:6e3,onClose:function(){return s("")},message:o})]})})),De=n(173),Fe=n(253),Ee=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object($.jsx)(we.a,{component:C.b,to:n,children:a}):Object($.jsx)("div",{children:a})},Me=Object(re.gql)(d||(d=Object(ce.a)(["\n  query getLessons {\n    getLessons {\n      id\n      module {\n        id\n        title\n      }\n      questions {\n        id\n        text {\n          text\n        }\n      }\n    }\n  }\n"]))),Qe=Object(re.gql)(b||(b=Object(ce.a)(["\n  query getLesson($id: String!) {\n    getLesson(id: $id) {\n      id\n      createdAt\n      updatedAt\n      module {\n        id\n      }\n      questions {\n        id\n        text {\n          id\n          text\n          order\n        }\n        type\n        answer\n        answerArr\n      }\n    }\n  }\n"]))),$e=Object(re.gql)(O||(O=Object(ce.a)(["\n  mutation addLesson($module: String!, $input: LessonValidator!) {\n    addLesson(module: $module, input: $input) {\n      id\n    }\n  }\n"]))),Be=(Object(re.gql)(h||(h=Object(ce.a)(["\n  mutation updateLesson($id: String!, $input: LessonValidator!) {\n    updateLesson(id: $id, input: $input) {\n      id\n      title\n      level\n      type\n    }\n  }\n"]))),Object(re.gql)(p||(p=Object(ce.a)(["\n  mutation deleteLesson($id: String!) {\n    deleteLesson(id: $id)\n  }\n"])))),He=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.lesson,i=e.handleClose,r=A.a.useState(""),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(re.useMutation)(Be),u=Object(S.a)(l,2),j=u[0],d=u[1].loading;return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsxs)(ke.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"edit-lesson-dialog",children:[Object($.jsx)(Ae.a,{children:"Confirmation"}),Object($.jsx)(Ie.a,{children:Object($.jsx)(qe.a,{children:"Are you sure you want to delete this lesson?"})}),Object($.jsxs)(Ne.a,{children:[Object($.jsx)(E.a,{color:"primary",variant:"contained",onClick:function(){return i(!1)},endIcon:Object($.jsx)(Le.a,{}),children:"Cancel"}),Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;j({variables:{id:e}}).then((function(e){if(!0===e.data.deleteLesson)return t.push("/module/".concat(a.module.id,"/true"));s("Could not delete Lesson")})).catch((function(e){s(e.toString())}))},disabled:d,endIcon:d?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ye.a,{}),children:"Confirm"})]})]}),Object($.jsx)(U.a,{open:""!==o,autoHideDuration:6e3,onClose:function(){return s("")},message:o})]})})),Pe=n(34),ze=n(250),We=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object($.jsx)(we.a,{component:C.b,to:n,children:a}):Object($.jsx)("div",{children:a})},_e=Object(re.gql)(x||(x=Object(ce.a)(["\n  query getQuestions {\n    getQuestions {\n      id\n      title\n      level\n      lessons {\n        id\n      }\n    }\n  }\n"]))),Re=Object(re.gql)(m||(m=Object(ce.a)(["\n  query getQuestionTypes {\n    getQuestionTypes\n  }\n"]))),Ue=Object(re.gql)(g||(g=Object(ce.a)(["\n  query getQuestion($id: String!) {\n    getQuestion(id: $id) {\n      id\n      image\n      type\n      createdAt\n      options\n      points\n      answer\n      answerArr\n      answerHint\n      text {\n        id\n        text\n        order\n        note {\n          id\n        }\n      }\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Ke=Object(re.gql)(f||(f=Object(ce.a)(["\n  mutation addQuestion($lessonId: String!, $input: QuestionValidator!) {\n    addQuestion(lessonId: $lessonId, input: $input) {\n      id\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Ve=Object(re.gql)(v||(v=Object(ce.a)(["\n  mutation updateQuestion($id: String!, $input: QuestionValidator!) {\n    updateQuestion(id: $id, input: $input) {\n      id\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Je=Object(re.gql)(y||(y=Object(ce.a)(["\n  mutation deleteQuestion($id: String!) {\n    deleteQuestion(id: $id)\n  }\n"]))),Ye=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.question,i=e.handleClose,r=A.a.useState(""),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(re.useMutation)(Je),u=Object(S.a)(l,2),j=u[0],d=u[1].loading;return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsxs)(ke.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"edit-question-dialog",children:[Object($.jsx)(Ae.a,{children:"Confirmation"}),Object($.jsx)(Ie.a,{children:Object($.jsx)(qe.a,{children:"Are you sure you want to delete this question?"})}),Object($.jsxs)(Ne.a,{children:[Object($.jsx)(E.a,{color:"primary",variant:"contained",onClick:function(){return i(!1)},endIcon:Object($.jsx)(Le.a,{}),children:"Cancel"}),Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;j({variables:{id:e}}).then((function(e){if(!0===e.data.deleteQuestion)return t.push("/lesson/".concat(a.lesson.id,"/true"));s("Could not delete Question")})).catch((function(e){s(e.toString())}))},disabled:d,endIcon:d?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ye.a,{}),children:"Confirm"})]})]}),Object($.jsx)(U.a,{open:""!==o,autoHideDuration:6e3,onClose:function(){return s("")},message:o})]})})),Ge=n(243),Xe=n(278),Ze=n(236),et=n(244),tt=Object(Ge.a)((function(e){return Object(N.a)({preview:{height:200,minWidth:200,margin:"".concat(e.spacing(2),"px auto"),backgroundSize:"contain"},cardText:{textAlign:"center"}})})),nt=function(e){var t=e.photo,n=tt(),a=A.a.useState(!0),i=Object(S.a)(a,2),r=i[0],c=i[1],o=A.a.useState(""),s=Object(S.a)(o,2),l=s[0],u=s[1];return Object(k.useEffect)((function(){t&&""===l?(u(t),c(!1)):c(!1)}),[l,t]),r?Object($.jsx)(be,{}):l?Object($.jsx)(Ze.a,{in:!0,children:Object($.jsx)(et.a,{image:l,className:n.preview})}):Object($.jsx)(te,{message:"Could not preview image"})},at=Object(Ge.a)((function(e){return Object(N.a)({previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",textAlign:"center",padding:e.spacing(2),margin:e.spacing(2),height:"55vh"},optionChip:{background:"#e0e0e06b",borderRadius:8,fontWeight:800,margin:e.spacing(1)},doneButton:{width:"90%"}})})),it=function(e){var t=e.question,n=at(),a=Object(Pe.a)(t.text).sort((function(e,t){return e.order-t.order}));return Object($.jsxs)(L.a,{className:n.previewContainer,children:[Object($.jsx)(D.a,{variant:"h3",children:a.map((function(e){return e.note?Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)("span",{style:{color:"#ff9100",textDecoration:"underline"},children:e.text}),Object($.jsx)("span",{children:" "})]},e.text):e.text+" "}))}),Object($.jsx)(nt,{photo:t.image.includes("base64")?t.image:J.server_url+"/images/"+t.image}),Object($.jsx)("div",{children:t.options.map((function(e){return Object($.jsx)(Xe.a,{label:e,className:n.optionChip},e)}))}),Object($.jsx)(E.a,{variant:"contained",disabled:!0,className:n.doneButton,onClick:function(){},children:"Done"})]})},rt=Object(M.a)((function(e){var t=e.palette,n=e.spacing;return Object(N.a)({card:{margin:"".concat(n(4),"px auto")},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.question,i=e.link,r=void 0===i?null:i,c=e.delay,o=void 0===c?0:c,s=e.lessonId,l=void 0===s?null:s,u=A.a.useState(null),j=Object(S.a)(u,2),d=j[0],b=j[1],O=A.a.useState(!1),h=Object(S.a)(O,2),p=h[0],x=h[1],m=Boolean(d),g=Object(Pe.a)(a.text).sort((function(e,t){return e.order-t.order}));return t?Object($.jsx)(he.a,{in:!0,style:{transitionDelay:"".concat(o,"ms")},children:Object($.jsxs)(We,{link:r,children:[Object($.jsx)(X.a,{title:g.map((function(e){return e.text+" "})),subheader:"MULTIPLE_CHOICE"===a.type?"Answer: "+a.answerArr.map((function(e){return e})):"Answer: "+a.answer,action:t&&Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(z.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},children:Object($.jsx)(fe.a,{})}),Object($.jsxs)(W.a,{id:"menu",anchorEl:d,open:m,onClose:function(){b(null)},children:[Object($.jsxs)(_.a,{component:C.b,to:"/update/question/".concat(l||a.lesson.id,"/").concat(a.id),children:[Object($.jsx)(pe.a,{children:Object($.jsx)(ve.a,{})}),Object($.jsx)(xe.a,{primary:"Edit"})]}),Object($.jsxs)(_.a,{onClick:function(){return x(!0)},children:[Object($.jsx)(pe.a,{children:Object($.jsx)(ye.a,{})}),Object($.jsx)(xe.a,{primary:"Delete"})]})]})]})}),Object($.jsxs)(T.a,{children:[Object($.jsx)(it,{question:a}),Object($.jsx)(Ye,{open:p,question:a,handleClose:x,history:n})]})]})}):Object($.jsx)(A.a.Fragment,{children:Object($.jsxs)(De.a,{button:!0,component:C.b,to:"/question/".concat(a.id),children:[Object($.jsx)(pe.a,{children:Object($.jsx)(ze.a,{})}),Object($.jsx)(xe.a,{primary:g.map((function(e){return e.text+" "})),secondary:"MULTIPLE_CHOICE"===a.type?"Answer: "+a.answerArr.map((function(e){return e})):"Answer: "+a.answer})]})})})),ct=Object(M.a)((function(e){var t=e.palette,n=e.spacing;return Object(N.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{height:200},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.classes,i=e.lesson,r=e.link,c=void 0===r?null:r,o=e.delay,s=void 0===o?0:o,l=e.disableHeight,u=void 0===l||l,j=A.a.useState(null),d=Object(S.a)(j,2),b=d[0],O=d[1],h=A.a.useState(!1),p=Object(S.a)(h,2),x=p[0],m=p[1],g=Boolean(b);return t?Object($.jsx)(he.a,{in:!0,style:{transitionDelay:"".concat(s,"ms")},children:Object($.jsx)(L.a,{className:u?a.fixedHeightCard:a.card,children:Object($.jsxs)(Ee,{link:c,children:[Object($.jsx)(X.a,{title:"Lesson",subheader:new Date(i.createdAt).toDateString(),action:t&&Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(z.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){O(e.currentTarget)},children:Object($.jsx)(fe.a,{})}),Object($.jsx)(W.a,{id:"menu",anchorEl:b,open:g,onClose:function(){O(null)},children:Object($.jsxs)(_.a,{onClick:function(){return m(!0)},children:[Object($.jsx)(pe.a,{children:Object($.jsx)(ye.a,{})}),Object($.jsx)(xe.a,{primary:"Delete"})]})})]})}),Object($.jsx)(T.a,{children:t?Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(me.a,{children:i.questions.map((function(e){return Object($.jsx)(rt,{lessonId:i.id,history:n,question:e,displayActions:!1},e.id)}))}),Object($.jsx)(He,{open:x,lesson:i,handleClose:m,history:n}),Object($.jsx)(ge.a,{className:a.fab,component:C.b,"aria-label":"Add Lesson",color:"secondary",to:"/create/question/".concat(i.id),children:Object($.jsx)(Ce.a,{})})]}):Object($.jsxs)(D.a,{variant:"body2",children:[i.lessons.length," Lesson",i.lessons.length>1?"s":""]})})]})})}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsxs)(De.a,{button:!0,component:C.b,to:"/lesson/".concat(i.id),children:[Object($.jsx)(pe.a,{children:Object($.jsx)(Fe.a,{})}),Object($.jsx)(xe.a,{primary:"Lesson",secondary:"Last Updated: ".concat(new Date(i.updatedAt).toDateString())})]}),Object($.jsx)(He,{open:x,lesson:i,handleClose:m,history:n})]})})),ot=Object(M.a)((function(e){var t=e.palette,n=e.spacing;return Object(N.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{margin:"".concat(n(4),"px auto")},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.classes,i=e.module,r=e.link,c=void 0===r?null:r,o=e.delay,s=void 0===o?0:o,l=e.disableHeight,u=void 0===l||l,j=e.refetch,d=void 0===j?function(){}:j,b=A.a.useState(null),O=Object(S.a)(b,2),h=O[0],p=O[1],x=A.a.useState(!1),m=Object(S.a)(x,2),g=m[0],f=m[1],v=A.a.useState(""),y=Object(S.a)(v,2),w=y[0],k=y[1],I=Object(re.useMutation)($e),q=Object(S.a)(I,2),N=q[0],F=q[1].loading,E=Boolean(h);return Object($.jsx)(he.a,{in:!0,style:{transitionDelay:"".concat(s,"ms")},children:Object($.jsx)(L.a,{className:u?a.fixedHeightCard:a.card,children:Object($.jsxs)(Se,{link:c,children:[Object($.jsx)(X.a,{title:i.title,subheader:new Date(i.createdAt).toDateString(),action:t&&Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(z.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:Object($.jsx)(fe.a,{})}),Object($.jsxs)(W.a,{id:"menu",anchorEl:h,open:E,onClose:function(){p(null)},children:[Object($.jsxs)(_.a,{component:C.b,to:"/update/module/".concat(i.id),children:[Object($.jsx)(pe.a,{children:Object($.jsx)(ve.a,{})}),Object($.jsx)(xe.a,{primary:"Edit"})]}),Object($.jsxs)(_.a,{onClick:function(){return f(!0)},children:[Object($.jsx)(pe.a,{children:Object($.jsx)(ye.a,{})}),Object($.jsx)(xe.a,{primary:"Delete"})]})]})]})}),Object($.jsx)(T.a,{children:t?Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(me.a,{children:i.lessons.map((function(e){return Object($.jsx)(ct,{history:n,lesson:e,link:"/lesson/".concat(e.id),displayActions:!1},e.id)}))}),Object($.jsx)(Te,{open:g,module:i,handleClose:f,history:n}),Object($.jsx)(ge.a,{className:a.fab,disabled:F,"aria-label":"Add Lesson",color:"secondary",onClick:function(){N({variables:{module:i.id,input:{level:i.level}}}).then((function(){d(),k("Lesson Added")})).catch((function(e){console.log("error!",e),k("Error adding Lesson: "+e.toString())}))},children:F?Object($.jsx)(R.a,{size:18}):Object($.jsx)(Ce.a,{})}),Object($.jsx)(U.a,{open:""!==w,autoHideDuration:6e3,onClose:function(){return k("")},message:w})]}):Object($.jsxs)(D.a,{variant:"body2",children:[i.lessons.length," Lesson",i.lessons.length>1?"s":""]})})]})})})})),st=Object(I.g)((function(e){var t=e.history,n=e.match.params,a=n.id,i=n.newFetch,r=Object(re.useQuery)(se,{variables:{id:a}}),c=r.loading,o=r.error,s=r.data,l=r.refetch;return c?Object($.jsx)(be,{}):o||!s.getModule?Object($.jsx)(te,{message:o?o.message:"Could not load Module"}):(i&&(l(),t.push("/module/".concat(s.getModule.id))),Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/modules",startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsx)("div",{style:{position:"relative"},children:Object($.jsx)(ot,{module:s.getModule,history:t,displayActions:!0,disableHeight:!1,refetch:l})})]}))})),lt=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,i=Object(re.useQuery)(oe),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),a.push("/modules")),r?Object($.jsx)(be,{}):c?Object($.jsx)(te,{message:c.message}):Object($.jsxs)(A.a.Fragment,{children:[o.getModules.length<1?Object($.jsx)(te,{message:"No Modules Found"}):o.getModules.map((function(e){return Object($.jsx)(ot,{history:a,displayActions:!1,module:e,link:"/module/".concat(e.id)},e.id)})),Object($.jsx)(ge.a,{className:t.fab,component:C.b,"aria-label":"Add Module",color:"secondary",to:"/create/module",children:Object($.jsx)(Ce.a,{})})]})})),ut=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(k.useState)(""),i=Object(S.a)(a,2),r=i[0],c=i[1],o=Object(k.useState)(0),s=Object(S.a)(o,2),l=s[0],u=s[1],j=Object(k.useState)(""),d=Object(S.a)(j,2),b=d[0],O=d[1],h=Object(k.useState)(""),p=Object(S.a)(h,2),x=p[0],m=p[1],g=Object(k.useState)(""),f=Object(S.a)(g,2),v=f[0],y=f[1],w=Object(re.useMutation)($e),I=Object(S.a)(w,2),q=I[0],N=I[1].loading,M=function(){(function(){var e=!1;return r.length<3?m("Title must be at least 3 characters"):(e=!0,m("")),e})()&&(y(""),q({variables:{input:{title:r,level:l,type:b}}}).then((function(e){t.push("/lessons/true")})).catch((function(e){y(e.toString())})))};return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/",startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsxs)(L.a,{elevation:3,className:n.wrapper,children:[Object($.jsx)(X.a,{title:"Create Lesson"}),Object($.jsxs)(T.a,{children:[Object($.jsx)(ne.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&M()},error:""!==x,helperText:x}),Object($.jsx)(ne.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:l,onChange:function(e){return u(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&M()}}),Object($.jsx)(ne.a,{title:"type",label:"Lesson Type",margin:"normal",value:b,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&M()}}),Object($.jsx)(D.a,{variant:"caption",color:"error",children:v})]}),Object($.jsx)(F.a,{children:Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:M,disabled:N,endIcon:N?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ie.a,{}),children:"Save"})})]})]})})),jt=Object(I.g)((function(e){var t=e.history,n=e.match.params,a=n.id,i=n.newFetch,r=Object(re.useQuery)(Qe,{variables:{id:a}}),c=r.loading,o=r.error,s=r.data,l=r.refetch;return i&&(l(),t.push("/lesson/".concat(a))),c?Object($.jsx)(be,{}):o||!s.getLesson?Object($.jsx)(te,{message:o?o.message:"Could not load Lesson"}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/module/".concat(s.getLesson.module.id),startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsx)("div",{style:{position:"relative"},children:Object($.jsx)(ct,{lesson:s.getLesson,history:t,displayActions:!0,disableHeight:!1})})]})})),dt=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,i=Object(re.useQuery)(Me),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),a.push("/lessons")),r?Object($.jsx)(be,{}):c?Object($.jsx)(te,{message:c.message}):Object($.jsxs)(A.a.Fragment,{children:[o.getLessons.length<1?Object($.jsx)(te,{message:"No Lessons Found"}):o.getLessons.map((function(e){return Object($.jsx)(ct,{history:a,displayActions:!1,lesson:e,link:"/lesson/".concat(e.id)},e.id)})),Object($.jsx)(ge.a,{className:t.fab,component:C.b,"aria-label":"Add Lesson",color:"secondary",to:"/create/lesson",children:Object($.jsx)(Ce.a,{})})]})})),bt=n(23),Ot=n(281),ht=n(264),pt=n(271),xt=n(222),mt=n(257),gt=n(141),ft=n(276),vt=n(258),yt=n(233),Ct=n(255),wt=n(256),St=n(254),kt=n(138);function At(e){var t=e.items,n=e.swapDistance,a=e.onPositionUpdate,i=e.onPositionChange,r=Object(k.useState)(-1),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(k.useCallback)((function(e,i){var r=function(e,t,n,a){var i=e;if(t>0){if(e===n-1)return e;t>a&&(i=e+1)}else if(t<0){if(0===e)return e;t<-a&&(i=e-1)}return Math.min(Math.max(i,0),n)}(e,i,t.length,n);r!==e&&a(e,r)}),[t.length,n,a]),u=Object(k.useCallback)((function(e){i&&o!==e&&i(o,e),s(-1)}),[o,i]);return{handleChange:l,handleDragStart:s,handleDragEnd:u}}var It,qt,Nt,Lt,Tt,Dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case"dragging":return t+3;case"animating":return t+2;default:return t+1}};function Ft(e){var t=e.index,n=e.height,a=e.item,i=e.itemProps,r=e.listItem,c=function(e,t){var n=t.handleChange,a=t.handleDragStart,i=t.handleDragEnd,r=Object(k.useState)("idle"),c=Object(S.a)(r,2),o=c[0],s=c[1];return[o,{onDragStart:function(){s("dragging"),a(e)},onDragEnd:function(){s("animating"),i(e)},onAnimationComplete:function(){"animating"===o&&s("idle")},onViewportBoxUpdate:function(t,a){"dragging"===o&&n(e,a.y.translate)}}]}(t,i),o=Object(S.a)(c,2),s=o[0],l=o[1];return Object($.jsx)("div",{style:{padding:0,height:n,zIndex:Dt(s)},children:Object($.jsx)(kt.a.div,Object(bt.a)(Object(bt.a)({layout:!0,initial:!1,drag:"y",style:{height:n,borderRadius:5},whileHover:{scale:1.03,boxShadow:"0px 3px 3px rgba(0,0,0,0.15)"},whileTap:{scale:1.12,boxShadow:"0px 5px 5px rgba(0,0,0,0.1)"}},l),{},{children:r(a)}))})}function Et(e){var t=e.items,n=e.setItems,a=e.listItem,i=Object(k.useCallback)((function(e,a){n(function(e,t,n){var a=Object(Pe.a)(e);return a[n]=e[t],a[t]=e[n],a}(t,e,a))}),[t,n]),r=At({items:t,swapDistance:60,onPositionUpdate:i});return Object($.jsx)(A.a.Fragment,{children:t.map((function(e,t){return Object($.jsx)(Ft,{index:t,height:60,item:Object(bt.a)({i:t},e),listItem:a,itemProps:r},e.id)}))})}var Mt=Object(re.gql)(It||(It=Object(ce.a)(["\n  query getNotes {\n    getNotes {\n      id\n      title\n      markdown\n      sanitizedHtml\n    }\n  }\n"]))),Qt=(Object(re.gql)(qt||(qt=Object(ce.a)(["\n  query getNote($id: String!) {\n    getNote(id: $id) {\n      id\n      title\n      markdown\n      sanitizedHtml\n    }\n  }\n"]))),Object(re.gql)(Nt||(Nt=Object(ce.a)(["\n  mutation addNote($questionText: String!, $input: NoteValidator!) {\n    addNote(questionText: $questionText, input: $input) {\n      id\n    }\n  }\n"])))),$t=(Object(re.gql)(Lt||(Lt=Object(ce.a)(["\n  mutation updateNote($id: String!, $input: NoteValidator!) {\n    updateNote(id: $id, input: $input) {\n      id\n    }\n  }\n"]))),Object(re.gql)(Tt||(Tt=Object(ce.a)(["\n  mutation deleteNote($id: String!) {\n    deleteNote(id: $id)\n  }\n"]))),function(e){var t=e.newNote,n=Object(k.useState)(""),a=Object(S.a)(n,2),i=a[0],r=a[1],c=Object(k.useState)(""),o=Object(S.a)(c,2),s=o[0],l=o[1],u=Object(k.useState)(""),j=Object(S.a)(u,2),d=j[0],b=j[1],O=Object(k.useState)(""),h=Object(S.a)(O,2),p=h[0],x=h[1],m=Object(k.useState)(!1),g=Object(S.a)(m,2),f=g[0],v=g[1],y=Object(re.useMutation)(Qt),C=Object(S.a)(y,1)[0],w=Object(k.useState)(""),A=Object(S.a)(w,2),I=A[0],q=A[1];return Object($.jsxs)("div",{children:[Object($.jsx)(ne.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:i,onChange:function(e){return r(e.target.value)},error:""!==s,helperText:s}),Object($.jsx)(ne.a,{"aria-label":"Note content",rows:8,label:"Add your note content...",placeholder:"Add your note content...",multiline:!0,value:d,onChange:function(e){return b(e.target.value)},error:""!==p,helperText:p}),Object($.jsx)(D.a,{variant:"caption",color:"error",children:I}),Object($.jsx)(E.a,{disabled:f,endIcon:f?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ie.a,{}),variant:"contained",color:"primary",onClick:function(){(i.length<3?(l("Title must be at least 3 characters"),0):(l(""),d.length<5?(x("Note must be at least 5 characters"),0):(x(""),1)))&&(v(!0),q(""),C({variables:{questionText:"",input:{title:i,markdown:d}}}).then((function(e){t(i,e.data.addNote.id)})).catch((function(e){v(!1),q(e.toString())})))},children:"Save"})]})}),Bt=Object(Ge.a)((function(){return Object(N.a)({iconButton:{padding:10}})})),Ht=function(e){var t=e.i,n=e.onSelect,a=e.hasNote,i=void 0!==a&&a,r=Bt(),c=Object(re.useQuery)(Mt),o=c.loading,s=c.error,l=c.data,u=c.refetch,j=Object(k.useState)(!1),d=Object(S.a)(j,2),b=d[0],O=d[1],h=Object(k.useState)(""),p=Object(S.a)(h,2),x=p[0],m=p[1],g=Object(k.useState)(!1),f=Object(S.a)(g,2),v=f[0],y=f[1],C=function(e){n(t,e),y(!1)},w=l&&l.getNotes?l.getNotes.filter((function(e){return""===x||e.title.toLowerCase().includes(x.toLowerCase())})):[];return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(z.a,{onClick:function(){return y(!0)},color:i?"primary":"default",className:r.iconButton,"aria-label":"Add a link to text",children:Object($.jsx)(St.a,{})}),Object($.jsxs)(ke.a,{open:v,onClose:function(){return y(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object($.jsx)(Ae.a,{id:"alert-dialog-title",children:"Attach a note to this text"}),Object($.jsxs)(Ie.a,{children:[Object($.jsx)(qe.a,{id:"alert-dialog-description",children:"Attaching a note allows the user to select this piece of text, and view more details about it"}),b?Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{startIcon:Object($.jsx)(ae.a,{}),onClick:function(){return O(!1)},children:"Back"}),Object($.jsx)($t,{newNote:function(e,t){u(),m(e),O(!1),C(t)}})]}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(ne.a,{title:"Search notes",label:"Search existing notes",autoFocus:!0,margin:"normal",value:x,onChange:function(e){return m(e.target.value)}}),Object($.jsx)(me.a,{children:s?Object($.jsx)(te,{message:s.message}):o?Object($.jsx)(be,{}):w.length>0?w.map((function(e){return Object($.jsx)(De.a,{button:!0,onClick:function(){return C(e.id)},children:Object($.jsx)(xe.a,{children:e.title})},e.id)})):Object($.jsxs)("div",{children:[Object($.jsx)(D.a,{children:"Could not find any notes"}),Object($.jsx)(E.a,{color:"primary",onClick:function(){return O(!0)},children:"Create one"})]})})]})]})]})]})},Pt=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3)},inputContainer:{padding:"2px 4px",display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"80%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},listItem:{cursor:"move"}})})),zt=function(){var e=Pt(),t=Cn(),n=Object(S.a)(t,2),a=n[0],i=n[1],r=Object(k.useState)(""),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(k.useState)(""),u=Object(S.a)(l,2),j=u[0],d=u[1],b=Object(k.useState)(-1),O=Object(S.a)(b,2),h=O[0],p=O[1],x=Object(k.useState)((function(){return[]})),m=Object(S.a)(x,2),g=m[0],f=m[1],v=Object(k.createRef)(),y=Object(k.useCallback)((function(){var e=a;return e.text=g.map((function(e,t){return{order:t,text:e.text,note:e.note}})),i(e)}),[g,a,i]);Object(k.useEffect)((function(){if(a.text.length>0&&0===g.length){var e=a.text.map((function(e,t){return{id:t,text:e.text}}));return f(e)}y()}),[a,g,y]);var C=function(e){if(e.preventDefault(),o.length<1)return d("Text must be at least one character");if(-1!==h){var t=g.findIndex((function(e){return e.id===h}));f((function(e){return e[t].text=o,Object(Pe.a)(e)})),p(-1)}else{var n={id:g.length+1,text:o};f((function(e){return[].concat(Object(Pe.a)(e),[n])}))}s(""),d("")},w=function(e,t){var n=g.findIndex((function(t){return t.id===e})),a=g;a[n].note=t,f(Object(Pe.a)(a)),y()};return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"Add Question Text"}),Object($.jsxs)(gt.a,{className:e.inputContainer,children:[Object($.jsx)(ft.a,{className:e.input,placeholder:"Add a new text item",inputProps:{"aria-label":"Add item"},autoFocus:!0,inputRef:v,value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&C(e)},error:""!==j}),Object($.jsx)(xt.a,{in:-1!==h,children:Object($.jsx)(z.a,{className:e.iconButton,"aria-label":"Cancel edit",onClick:function(){p(-1),s("")},children:Object($.jsx)(Le.a,{})})}),Object($.jsx)(z.a,{className:e.iconButton,"aria-label":-1!==h?"Edit":"Create",onClick:C,children:-1!==h?Object($.jsx)(wt.a,{}):Object($.jsx)(Ce.a,{})}),Object($.jsx)(vt.a,{className:e.divider,orientation:"vertical"}),Object($.jsx)(z.a,{className:e.iconButton,"aria-label":"Add a link to text",children:Object($.jsx)(St.a,{})})]}),Object($.jsx)(yt.a,{error:!0,children:j}),Object($.jsx)(me.a,{children:Object($.jsx)(Et,{items:g,setItems:f,listItem:function(t){var n=t.id,a=t.text,i=t.note,r=void 0===i?"":i;return Object($.jsxs)(De.a,{className:e.listItem,children:[Object($.jsx)(pe.a,{children:Object($.jsx)(Ct.a,{})}),Object($.jsx)(xt.a,{in:!0,children:Object($.jsx)(xe.a,{children:a})}),Object($.jsx)(pe.a,{children:Object($.jsx)(z.a,{onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e}));p(e),s(g[t].text),v&&v.current&&v.current.focus()}(n)},children:Object($.jsx)(wt.a,{})})}),Object($.jsx)(mt.a,{children:Object($.jsx)(z.a,{"aria-label":"comments",onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e})),n=g;n.splice(t,1),f(Object(Pe.a)(n)),y()}(n)},children:Object($.jsx)(ye.a,{})})}),Object($.jsx)(Ht,{i:n,hasNote:""!==r,onSelect:w}),Object($.jsx)(pe.a,{})]})}})})]})},Wt=n(80),_t=n.n(Wt),Rt=n(109),Ut=n(259),Kt=n(260),Vt=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3)},label:{display:"flex",flexDirection:"column",margin:"".concat(e.spacing(4),"px auto")},input:{display:"none"},uploadHelpText:{textAlign:"center"}})})),Jt=function(){var e=Vt(),t=Cn(),n=Object(S.a)(t,2),a=n[0],i=n[1],r=Object(k.useState)(!1),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(k.useState)(""),u=Object(S.a)(l,2),j=u[0],d=u[1];Object(k.useEffect)((function(){if(""!==a.image)return s(!0);s(!1)}),[a,o]);var b=function(){var e=Object(Rt.a)(_t.a.mark((function e(t){var n,r,c;return _t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return",d("Please upload an image"));case 2:if(!((n=t.target.files[0]).size>6145728)){e.next=5;break}return e.abrupt("return",d("Upload cannot be greater than 6 MegaBytes"));case 5:return d(""),e.prev=6,e.next=9,O(n);case 9:if("string"!==typeof(r=e.sent)){e.next=15;break}return(c=a).image=r,i(c),e.abrupt("return",s(!0));case 15:d("Could not upload image"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),d("Could not upload file: "+e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return new Promise(function(){var t=Object(Rt.a)(_t.a.mark((function t(n,a){var i;return _t.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new FileReader).onload=function(){return n(i.result)},i.onerror=function(e){return a(e)},i.readAsDataURL(e);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"Add an Image"}),o?Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(nt,{photo:a.image.includes("base64")?a.image:J.server_url+"/images/"+a.image}),Object($.jsx)("br",{}),Object($.jsx)(E.a,{variant:"contained",color:"secondary",onClick:function(){return function(){var e=a;e.image="",s(!1),i(e)}()},endIcon:Object($.jsx)(Ut.a,{}),className:e.label,children:"Clear"})]}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)("input",{accept:".jpg, .png, .jpeg",className:e.input,id:"photo-upload",type:"file",name:"photo-upload",onChange:function(e){return b(e)}}),Object($.jsx)(Ze.a,{in:!0,children:Object($.jsxs)("label",{htmlFor:"photo-upload",className:e.label,children:[Object($.jsx)(E.a,{variant:"contained",color:"secondary",component:"span",endIcon:Object($.jsx)(Kt.a,{}),children:"Upload"}),Object($.jsx)(yt.a,{error:""!==j,className:e.uploadHelpText,children:j||"Maximum Size: 6 MB"})]})})]})]})},Yt=n(231),Gt=n(232),Xt=n(279),Zt=n(261),en=n(270),tn=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),nn=function(){var e=tn(),t=Cn(),n=Object(S.a)(t,2),a=n[0],i=n[1],r=a.questionTypeOptions.length<1?["Multiple Choice","Text"]:a.questionTypeOptions,c=function(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")};return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"Select Question Type"}),Object($.jsxs)(Yt.a,{component:"fieldset",children:[Object($.jsx)(Gt.a,{component:"legend",children:"Question Type"}),Object($.jsx)(Xt.a,{"aria-label":"question-type",name:"question-type",defaultValue:a.type,value:c(a.type.replace("_"," ").toLowerCase()),onChange:function(e){var t=a;t.type=c(e.target.value.replace("_"," ").toLowerCase()),i(Object(bt.a)({},t))},children:r.map((function(e){return Object($.jsx)(Zt.a,{value:c(e.replace("_"," ").toLowerCase()),control:Object($.jsx)(en.a,{}),label:e},e)}))})]})]})},an=n(272),rn=n(262),cn=n(263),on=n(268),sn=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),ln=function(){var e=sn(),t=Cn(),n=Object(S.a)(t,2),a=n[0],i=n[1],r=Object($.jsx)(rn.a,{fontSize:"small"}),c=Object($.jsx)(cn.a,{fontSize:"small"});return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"Select Question Answer"}),"MULTIPLE_CHOICE"===a.type?Object($.jsx)(on.a,{id:"select-question-multi-choice-answer",multiple:!0,options:a.options,getOptionLabel:function(e){return e},style:{width:300},defaultValue:a.answerArr,disableCloseOnSelect:!0,onChange:function(e,t){return function(e){var t=a;t.answerArr=e,i(t)}(t||"")},renderOption:function(e,t){var n=t.selected;return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(an.a,{icon:r,checkedIcon:c,style:{marginRight:8},checked:n}),e]})},renderInput:function(e){return Object($.jsx)(ne.a,Object(bt.a)(Object(bt.a)({},e),{},{label:"Select Question Answer",variant:"outlined"}))}}):Object($.jsx)(on.a,{id:"select-question-text-answer",defaultValue:a.answer,options:a.options,getOptionLabel:function(e){return e},style:{width:300},onChange:function(e,t){return function(e){var t=a;t.answer=e,i(t)}(t||"")},renderInput:function(e){return Object($.jsx)(ne.a,Object(bt.a)(Object(bt.a)({},e),{},{label:"Select Question Answer",variant:"outlined"}))}})]})},un=n(280),jn=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),dn=function(){var e=jn(),t=Cn(),n=Object(S.a)(t,2),a=n[0],i=n[1];return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"Enter Question Details"}),Object($.jsx)(ne.a,{value:a.answerHint,onChange:function(e){return i(Object(bt.a)(Object(bt.a)({},a),{},{answerHint:e.target.value}))},helperText:"A hint to the user after they answer a question incorrect"}),Object($.jsx)(D.a,{id:"points-slider",gutterBottom:!0,children:"Points"}),Object($.jsx)(un.a,{defaultValue:25,onChange:function(e,t){return i(Object(bt.a)(Object(bt.a)({},a),{},{points:t}))},"aria-labelledby":"points-slider",valueLabelDisplay:"auto",step:10,marks:!0,min:10,max:100})]})},bn=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3)},inputContainer:{padding:"2px 4px",display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"80%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},listItem:{cursor:"move"}})})),On=function(){var e=bn(),t=Cn(),n=Object(S.a)(t,2),a=n[0],i=n[1],r=Object(k.useState)(""),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(k.useState)(""),u=Object(S.a)(l,2),j=u[0],d=u[1],b=Object(k.useState)(-1),O=Object(S.a)(b,2),h=O[0],p=O[1],x=Object(k.useState)((function(){return[]})),m=Object(S.a)(x,2),g=m[0],f=m[1],v=Object(k.createRef)(),y=Object(k.useCallback)((function(){var e=a;e.options=g.map((function(e){return e.text})),i(e)}),[g,a,i]);Object(k.useEffect)((function(){if(a.options.length>0&&0===g.length){var e=a.options.map((function(e,t){return{id:t,text:e}}));return f(e)}g.length>0&&g.length!==a.options.length&&y()}),[a,g,y]);var C=function(e){if(e.preventDefault(),o.length<1)return d("Text must be at least one character");if(-1!==h){var t=g.findIndex((function(e){return e.id===h}));f((function(e){return e[t].text=o,Object(Pe.a)(e)})),p(-1)}else{var n={id:g.length+1,text:o};f((function(e){return[].concat(Object(Pe.a)(e),[n])}))}s(""),d("")};return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"Add Options"}),Object($.jsxs)(gt.a,{className:e.inputContainer,children:[Object($.jsx)(ft.a,{className:e.input,placeholder:"Add a new option",inputProps:{"aria-label":"Add option"},autoFocus:!0,inputRef:v,value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&C(e)},error:""!==j}),Object($.jsx)(xt.a,{in:-1!==h,children:Object($.jsx)(z.a,{className:e.iconButton,"aria-label":"Cancel edit",onClick:function(){p(-1),s("")},children:Object($.jsx)(Le.a,{})})}),Object($.jsx)(z.a,{className:e.iconButton,"aria-label":-1!==h?"Edit":"Create",onClick:C,children:-1!==h?Object($.jsx)(wt.a,{}):Object($.jsx)(Ce.a,{})})]}),Object($.jsx)(yt.a,{error:!0,children:j}),Object($.jsx)(me.a,{children:Object($.jsx)(Et,{items:g,setItems:f,listItem:function(t){var n=t.id,a=t.text;return Object($.jsxs)(De.a,{className:e.listItem,children:[Object($.jsx)(pe.a,{children:Object($.jsx)(Ct.a,{})}),Object($.jsx)(xt.a,{in:!0,children:Object($.jsx)(xe.a,{children:a})}),Object($.jsx)(pe.a,{children:Object($.jsx)(z.a,{onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e}));p(e),s(g[t].text),v&&v.current&&v.current.focus()}(n)},children:Object($.jsx)(wt.a,{})})}),Object($.jsx)(mt.a,{onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e})),n=g;console.log("removing one",n[t]),n.splice(t,1),console.log("done",n[t]),f(Object(Pe.a)(n))}(n)},children:Object($.jsx)(z.a,{edge:"end","aria-label":"comments",children:Object($.jsx)(ye.a,{})})})]})}})})]})},hn=Object(Ge.a)((function(e){return Object(N.a)({root:{padding:"2px 4px",margin:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"}})})),pn=function(e){var t=e.handleReset,n=e.history,a=hn(),i=Cn(),r=Object(S.a)(i,1)[0],c=Object(k.useState)(""),o=Object(S.a)(c,2),s=o[0],l=o[1],u=Object(k.useState)(!1),j=Object(S.a)(u,2),d=j[0],b=j[1],O=Object(re.useMutation)(Ke),h=Object(S.a)(O,1)[0],p=Object(re.useMutation)(Ve),x=Object(S.a)(p,1)[0];return Object($.jsxs)("div",{className:a.root,children:[Object($.jsx)(D.a,{variant:"h1",children:"All Steps Complete"}),Object($.jsx)("br",{}),Object($.jsx)(D.a,{children:"This is your new question will look like:"}),Object($.jsx)(it,{question:r}),Object($.jsx)(E.a,{onClick:t,children:"Go back"}),Object($.jsx)(E.a,{variant:"contained",onClick:function(){l(""),b(!0);var e,t={requiresPiano:r.requiresPiano,text:r.text,image:r.image,options:r.options,type:(e=r.type.replace("_"," ").toLocaleLowerCase(),e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")),points:r.points,answer:r.answer,answerArr:r.answerArr,answerHint:r.answerHint};r.id?x({variables:{id:r.id,input:t}}).then((function(e){b(!1),n.push("/lesson/".concat(e.data.updateQuestion.lesson.id,"/true"))})).catch((function(e){b(!1),l(e.toString())})):h({variables:{lessonId:r.lessonId,input:t}}).then((function(e){b(!1),n.push("/lesson/".concat(e.data.addQuestion.lesson.id,"/true"))})).catch((function(e){b(!1),l(e.toString())}))},disabled:d,color:"primary",endIcon:d?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ie.a,{}),children:"Save"}),Object($.jsx)("br",{}),Object($.jsx)(D.a,{variant:"caption",color:"error",children:s})]})},xn=[{title:"Add Question Text",name:"text",component:Object($.jsx)(zt,{}),required:!0},{title:"Add Image",name:"image",component:Object($.jsx)(Jt,{}),required:!1},{title:"Select Type",name:"type",component:Object($.jsx)(nn,{}),required:!0},{title:"Add Options",name:"options",component:Object($.jsx)(On,{}),required:!0},{title:"Select Answer",name:["answerArr","answer"],component:Object($.jsx)(ln,{}),required:!0},{title:"Question Details",name:["points","answerHint"],component:Object($.jsx)(dn,{}),required:!0}],mn=Object(Ge.a)((function(e){return Object(N.a)({root:{width:"100%",position:"relative"},contentWrapper:{margin:"".concat(e.spacing(2),"px auto")},buttonContainer:{position:"fixed",bottom:0,left:0,right:0,padding:e.spacing(3)},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},completed:{display:"inline-block"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})}));var gn,fn=function(e){var t,n=e.history,a=mn(),i=Cn(),r=Object(S.a)(i,1)[0],c=A.a.useState(0),o=Object(S.a)(c,2),s=o[0],l=o[1],u=A.a.useState(new Set),j=Object(S.a)(u,2),d=j[0],b=j[1],O=A.a.useState(new Set),h=Object(S.a)(O,2),p=h[0],x=h[1],m=A.a.useState(new Set),g=Object(S.a)(m,2),f=g[0],v=g[1],y=xn,C=function(){return xn.map((function(e){return e.title})).length},w=function(e){return!0!==y[e].required},k=function(){return f.size},I=function(){return d.size},q=function(){return I()===C()-k()},N=function(){var e=s!==C()-1||q()?s+1:xn.findIndex((function(e,t){return!d.has(t)}));l(e)},T=function(e){return function(){l(e)}};function F(e){return d.has(e)}function M(e){return p.has(e)}return Object($.jsxs)("div",{className:a.root,children:[Object($.jsx)(Ot.a,{alternativeLabel:!0,nonLinear:!0,activeStep:s,children:y.map((function(e,t){var n={},a={};return w(t)&&(a.optional=Object($.jsx)(D.a,{variant:"caption",children:"Optional"})),function(e){return f.has(e)}(t)&&(n.completed=!1),Object($.jsx)(ht.a,Object(bt.a)(Object(bt.a)({},n),{},{children:M(t)?Object($.jsx)(pt.a,Object(bt.a)(Object(bt.a)({onClick:T(t),completed:F(t),icon:Object($.jsx)(Z.a,{}),style:{color:"red"}},a),{},{children:e.title})):Object($.jsx)(pt.a,Object(bt.a)(Object(bt.a)({onClick:T(t),completed:F(t)},a),{},{children:e.title}))}),e.title)}))}),Object($.jsx)("div",{children:q()?Object($.jsx)(pn,{history:n,handleReset:function(){l(0),b(new Set),v(new Set)}}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)("div",{className:a.contentWrapper,children:(t=s,y[t].component)}),Object($.jsxs)(L.a,{className:a.buttonContainer,children:[Object($.jsx)(E.a,{disabled:0===s,onClick:function(){l((function(e){return e-1}))},className:a.button,children:"Back"}),w(s)&&!d.has(s)&&Object($.jsx)(E.a,{variant:"contained",color:"primary",onClick:function(){if(!w(s))throw new Error("You can't skip a step that isn't optional.");l((function(e){return e+1})),v((function(e){var t=new Set(e.values());return t.add(s),t}))},className:a.button,children:"Skip"}),s!==xn.length&&(d.has(s)?Object($.jsx)(E.a,{variant:"contained",color:"primary",onClick:N,className:a.button,children:"Next"}):Object($.jsx)(E.a,{variant:"contained",color:"primary",onClick:function(){var e=new Set(d),t=new Set(p);if(x(new Set),xn[s].required)if("string"!==typeof xn[s].name){if(xn[s].name.every((function(e){return r[e].length<1})))return t.add(s),x(t)}else{var n=xn[s].name;if(r[n].length<1)return console.log("thats gotta be an error"),t.add(s),x(t)}e.add(s),b(e),d.size!==C()-k()&&N()},children:I()===C()-1?"Finish":"Next"}))]})]})})]})},vn={lessonId:"",requiresPiano:!1,text:[],image:"",options:[],type:"",points:0,answer:"",answerArr:[],answerHint:"",questionTypeOptions:[]},yn=Object(k.createContext)([vn,function(e){return null}]),Cn=function(){return Object(k.useContext)(yn)},wn=function(e){var t=e.history,n=e.match,a=e.update,i=void 0===a?null:a,r=A.a.useState(vn),c=Object(S.a)(r,2),o=c[0],s=c[1],l=Object(re.useQuery)(Re),u=l.loading,j=l.error,d=l.data;return Object(k.useEffect)((function(){if(!u&&!j&&d&&o.questionTypeOptions.length<1){var e=Object(bt.a)(Object(bt.a)({},o),{},{questionTypeOptions:d.getQuestionTypes,lessonId:i?i.lesson.id:n.params.id});if(i){e=Object(bt.a)(Object(bt.a)({},e),{},{id:i.id,requiresPiano:i.requiresPiano||!1,image:i.image,options:i.options,type:i.type,points:i.points,answer:i.answer,answerArr:i.answerArr,answerHint:i.answerHint});var t=Object(Pe.a)(i.text).sort((function(e,t){return e.order-t.order}));e.text=t}s(e)}}),[o,d,j,u,n.params.id,i]),Object($.jsx)(yn.Provider,{value:[o,s],children:Object($.jsx)(fn,{history:t})})},Sn=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.match;return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/lesson/".concat(n.params.id),startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsx)(wn,{history:t,match:n})]})})),kn=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.match,a=n.params.id,i=Object(re.useQuery)(Ue,{variables:{id:a}}),r=i.loading,c=i.error,o=i.data;return r?Object($.jsx)(be,{}):c||!o.getQuestion?Object($.jsx)(te,{message:c?c.message:"Could not load Question"}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/question/".concat(n.params.id),startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsx)(wn,{history:t,match:n,update:o.getQuestion})]})})),An=Object(I.g)((function(e){var t=e.history,n=e.match.params.id,a=Object(re.useQuery)(Ue,{variables:{id:n}}),i=a.loading,r=a.error,c=a.data;return i?Object($.jsx)(be,{}):r||!c.getQuestion?Object($.jsx)(te,{message:r?r.message:"Could not load Question"}):Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/lesson/".concat(c.getQuestion.lesson.id),startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsx)("div",{style:{position:"relative"},children:Object($.jsx)(rt,{question:c.getQuestion,history:t,displayActions:!0,disableHeight:!1})})]})})),In=Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,i=Object(re.useQuery)(_e),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),a.push("/questions")),r?Object($.jsx)(be,{}):c?Object($.jsx)(te,{message:c.message}):Object($.jsxs)(A.a.Fragment,{children:[o.getQuestions.length<1?Object($.jsx)(te,{message:"No Questions Found"}):o.getQuestions.map((function(e){return Object($.jsx)(rt,{history:a,displayActions:!1,question:e,link:"/question/".concat(e.id)},e.id)})),Object($.jsx)(ge.a,{className:t.fab,component:C.b,"aria-label":"Add Question",color:"secondary",to:"/create/question",children:Object($.jsx)(Ce.a,{})})]})})),qn=Object(re.gql)(gn||(gn=Object(ce.a)(["\n  mutation login($email: String!, $password: String!) {\n    adminLogin(input: { email: $email, password: $password }) {\n      token\n      expiration\n      user {\n        email\n        id\n      }\n    }\n  }\n"]))),Nn=[{name:"Login",link:"/login",component:Object(M.a)((function(e){var t=e.spacing;return Object(N.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(k.useState)(""),i=Object(S.a)(a,2),r=i[0],c=i[1],o=Object(k.useState)(""),s=Object(S.a)(o,2),l=s[0],u=s[1],j=Object(k.useState)(""),d=Object(S.a)(j,2),b=d[0],O=d[1],h=Object(k.useState)(""),p=Object(S.a)(h,2),x=p[0],m=p[1],g=A.a.useState(!1),f=Object(S.a)(g,2),v=f[0],y=f[1],w=A.a.useState(""),I=Object(S.a)(w,2),q=I[0],N=I[1],M=Object(re.useMutation)(qn),B=Object(S.a)(M,1)[0],H=function(){(function(){var e=!0;return r.length<3?(O("Email must be at least 3 characters"),e=!1):r.includes("@")&&r.includes(".")?O(""):(O("Please enter a valid email"),e=!1),l.length<6?(m("Password must be at least 6 characters"),e=!1):m(""),e})()&&(N(""),y(!0),B({variables:{email:r,password:l}}).then((function(e){N(""),Q.setUserDetails(e.data.adminLogin,(function(e){if(e)return t.push("/modules");N("The system encountered an error, please try again later")}))})).catch((function(e){y(!1),N(e.toString())})))};return Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(E.a,{component:C.b,to:"/",startIcon:Object($.jsx)(ae.a,{}),children:"Back"}),Object($.jsxs)(L.a,{elevation:3,className:n.wrapper,children:[Object($.jsx)(X.a,{title:"Login"}),Object($.jsxs)(T.a,{children:[Object($.jsx)(ne.a,{name:"email",label:"Email",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&H()},error:""!==b,helperText:b}),Object($.jsx)(ne.a,{name:"password",label:"Password",type:"password",margin:"normal",value:l,onChange:function(e){return u(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&H()},error:""!==x,helperText:x}),Object($.jsx)("br",{}),Object($.jsx)(D.a,{variant:"caption",color:"error",children:q}),Object($.jsxs)(D.a,{variant:"caption",children:["Don't have an account? ",Object($.jsx)(C.b,{to:"/register",children:"Register here"})]})]}),Object($.jsx)(F.a,{children:Object($.jsx)(E.a,{color:"secondary",variant:"contained",onClick:H,disabled:v,endIcon:v?Object($.jsx)(R.a,{size:18}):Object($.jsx)(ie.a,{}),children:"Login"})})]})]})})),authed:!1},{name:"Create Module",link:"/create/module",component:de,authed:!0},{name:"Module",link:"/module/:id/:newFetch?",component:st,authed:!0},{name:"Update Module",link:"/update/module/:id",component:Oe,authed:!0},{name:"Modules",link:"/modules/:newFetch?",component:lt,authed:!0},{name:"Create Lesson",link:"/create/lesson",component:ut,authed:!0},{name:"Lesson",link:"/lesson/:id/:newFetch?",component:jt,authed:!0},{name:"Lessons",link:"/lessons/:newFetch?",component:dt,authed:!0},{name:"Create Question",link:"/create/question/:id",component:Sn,authed:!0},{name:"Question",link:"/question/:id",component:An,authed:!0},{name:"Update Question",link:"/update/question/:lessonId/:id",component:kn,authed:!0},{name:"Questions",link:"/questions/:newFetch?",component:In,authed:!0}],Ln=function(){var e=A.a.useState(!1),t=Object(S.a)(e,2),n=t[0],a=t[1],i=Object(I.f)();return Object(k.useEffect)((function(){var e=function(e){return a(e)},t=Q.isAuthenticated();e(!!t),i.listen((function(){var t=Q.isAuthenticated();e(!!t)}))}),[i]),Object($.jsxs)(A.a.Fragment,{children:[Object($.jsx)(G,{isAuthed:n,setIsAuthed:a,history:i}),Object($.jsx)(q.a,{container:!0,justify:"center",style:{marginTop:"20px",marginBottom:"20px"},children:Object($.jsx)(q.a,{item:!0,xs:11,children:Object($.jsx)(k.Suspense,{fallback:Object($.jsx)(be,{}),children:Object($.jsxs)(I.c,{children:[Object($.jsx)(I.a,{exact:!0,path:"/",component:B}),Nn.map((function(e,t){var a=e.link,r=e.component;return e.authed&&!n?Object($.jsx)(I.a,{render:function(){return Object($.jsx)(te,{message:"You need to be logged in to view this page",action:function(){return i.push("/login")},actionLabel:"Login"})}},t):Object($.jsx)(I.a,{path:a,component:r},t)})),Object($.jsx)(I.a,{render:function(){return Object($.jsx)(te,{message:"The page you are looking for does not exist"})}})]})})})})]})},Tn=n(139),Dn=n(275),Fn=Object(Tn.a)({palette:{primary:{main:"#ff9100"},secondary:{main:"#42a5f5"}},typography:{fontFamily:["quicksand","sans-serif"].join(","),h1:{fontWeight:800,fontSize:"3.052rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h2:{fontWeight:700,fontSize:"2.441rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h3:{fontWeight:700,fontSize:"1.953rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h4:{fontWeight:700,fontSize:"1.563rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h5:{fontWeight:700,fontSize:"1.25rem",color:"#4e4e4e"}},overrides:{MuiTextField:{root:{width:"100%",margin:"16px auto"}},MuiListItemText:{root:{display:"flex",flexDirection:"column-reverse"}}}}),En=Fn=Object(Dn.a)(Fn),Mn=function(){return Object($.jsx)(C.a,{children:Object($.jsx)(w.a,{theme:En,children:Object($.jsx)(Ln,{})})})},Qn=new re.ApolloClient({uri:J.server_url+"/graphql",credentials:"include",cache:new re.InMemoryCache});i.a.render(Object($.jsx)(re.ApolloProvider,{client:Qn,children:Object($.jsx)(Mn,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):c(t,e)}))}}()}},[[170,1,2]]]);
//# sourceMappingURL=main.8046eafa.chunk.js.map