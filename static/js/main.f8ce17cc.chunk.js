(this["webpackJsonpmusic-theory-admin"]=this["webpackJsonpmusic-theory-admin"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var a=n(26),i=n.n(a),r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var o,s,l,u,j,d,b,O,h,p,x,m,g,f,v,y,w,C=n(13),S=n(266),k=n(8),A=n(0),I=n.n(A),N=n(30),q=n(265),L=n(274),T=n(211),D=n(215),F=n(51),E=n(216),M=n(217),$=n(7),Q={setUserDetails:function(e,t){var n={token:e.token,user:{email:e.user.email,id:e.user.id}};sessionStorage.setItem("jwt",JSON.stringify(n)),t(!0)},unsetUserDetails:function(e){sessionStorage.removeItem("jwt"),e(!0)},isAuthenticated:function(){if("undefined"==typeof window)return!1;if(null!==sessionStorage.getItem("jwt")){var e=JSON.parse(sessionStorage.getItem("jwt"));return!(!e||!e.user)&&e}return!1}},P=n(1),B=Object($.a)((function(){return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"}})}))((function(e){var t=e.classes;return Object(P.jsxs)(T.a,{className:t.root,children:[Object(P.jsxs)(D.a,{children:[Object(P.jsx)(F.a,{variant:"h1",children:"Welcome"}),Object(P.jsx)("br",{}),Object(P.jsx)(F.a,{variant:"body1",children:"Music Theory Admin Dashboard"})]}),Object(P.jsx)(E.a,{className:t.actions,children:Q.isAuthenticated()?Object(P.jsx)(M.a,{variant:"contained",color:"primary",component:C.b,"aria-label":"Button",to:"/modules",children:"Modules"}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{variant:"contained",color:"primary",component:C.b,"aria-label":"Button",to:"/login",children:"Login"}),Object(P.jsx)(M.a,{variant:"contained",color:"primary",component:C.b,"aria-label":"Button",to:"/register",children:"Register"})]})})]})})),H=n(218),z=n(219),_=n(172),R=n(140),W=n(225),U=n(226),K=n(273),V=n(220),J=n(221),Y={env:"production",server_url:"https://iadt-researchproject-server.herokuapp.com",ga_id:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SERVER_URL:"https://iadt-researchproject-server.herokuapp.com"}).REACT_APP_GOOGLE_ANALYTICS},G=n(110),X=function(e){var t=e.history,n=e.isAuthed,a=e.setIsAuthed;G.a.initialize(Y.ga_id);var i=I.a.useState(""),r=Object(k.a)(i,2),c=r[0],o=r[1];Object(A.useEffect)((function(){t.listen((function(){G.a.pageview(window.location.pathname+window.location.search)}))}),[t]);var s=I.a.useState(!1),l=Object(k.a)(s,2),u=l[0],j=l[1],d=I.a.useState(null),b=Object(k.a)(d,2),O=b[0],h=b[1],p=Boolean(O),x=function(){h(null)};return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(H.a,{position:"sticky",children:Object(P.jsxs)(z.a,{style:{justifyContent:"space-between"},children:[Object(P.jsx)(_.a,{"aria-label":"Home",component:C.b,to:"/",children:Object(P.jsx)(V.a,{})}),n&&Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(_.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){h(e.currentTarget)},color:"inherit",children:Object(P.jsx)(J.a,{})}),Object(P.jsx)(R.a,{id:"menu-appbar",anchorEl:O,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:x,children:Object(P.jsxs)(W.a,{disabled:u,onClick:function(){Q.isAuthenticated()?(j(!0),Q.unsetUserDetails((function(e){if(e)return a(!1),j(!1),x(),o("Logged out successfully"),t.push("/");o("The system encountered an error, please try again later")}))):(a(!1),o("The system encountered an error, please try again later"))},children:["Logout ",u&&Object(P.jsx)(U.a,{size:18})]})})]})]})}),Object(P.jsx)(K.a,{open:""!==c,autoHideDuration:6e3,onClose:function(){return o("")},message:c})]})},Z=n(228),ee=n(227),te=n(229),ne=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4),textAlign:"center",maxWidth:"800px",margin:"0 auto"},icon:{fontSize:"3em"},header:{display:"flex",flexDirection:"column-reverse",justifyContent:"center"},iconContainer:{textAlign:"center"}})}))((function(e){var t=e.message,n=void 0===t?void 0:t,a=e.classes,i=e.action,r=void 0===i?void 0:i,c=e.actionLabel,o=void 0===c?"Try Again":c;return Object(P.jsxs)(T.a,{elevation:3,className:a.wrapper,children:[Object(P.jsx)("div",{className:a.iconContainer,children:Object(P.jsx)(ee.a,{color:"error",className:a.icon})}),Object(P.jsx)(Z.a,{title:n||"There was a problem",className:a.header}),r?Object(P.jsx)(M.a,{className:a.iconContainer,variant:"contained",color:"secondary",endIcon:Object(P.jsx)(te.a,{}),onClick:r,children:o}):Object(P.jsx)(M.a,{component:C.b,to:"/",color:"primary",variant:"contained",children:"Home"})]})})),ae=n(267),ie=n(230),re=n(234),ce=n(11),oe=n(22),se=Object(ce.gql)(o||(o=Object(oe.a)(["\n  query getModules {\n    getModules {\n      id\n      title\n      level\n      createdAt\n      lessons {\n        id\n      }\n    }\n  }\n"]))),le=Object(ce.gql)(s||(s=Object(oe.a)(["\n  query getModule($id: String!) {\n    getModule(id: $id) {\n      id\n      title\n      level\n      type\n      createdAt\n      lessons {\n        id\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]))),ue=Object(ce.gql)(l||(l=Object(oe.a)(["\n  mutation addModule($input: ModuleValidator!) {\n    addModule(input: $input) {\n      id\n    }\n  }\n"]))),je=Object(ce.gql)(u||(u=Object(oe.a)(["\n  mutation updateModule($id: String!, $input: ModuleValidator!) {\n    updateModule(id: $id, input: $input) {\n      id\n      title\n      level\n      type\n    }\n  }\n"]))),de=Object(ce.gql)(j||(j=Object(oe.a)(["\n  mutation deleteModule($id: String!) {\n    deleteModule(id: $id)\n  }\n"]))),be=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(A.useState)(""),i=Object(k.a)(a,2),r=i[0],c=i[1],o=Object(A.useState)(0),s=Object(k.a)(o,2),l=s[0],u=s[1],j=Object(A.useState)("THEORY"),d=Object(k.a)(j,2),b=d[0],O=d[1],h=Object(A.useState)(""),p=Object(k.a)(h,2),x=p[0],m=p[1],g=Object(A.useState)(""),f=Object(k.a)(g,2),v=f[0],y=f[1],w=Object(ce.useMutation)(ue),S=Object(k.a)(w,2),N=S[0],q=S[1].loading,L=function(){(function(){var e=!1;return r.length<3?m("Title must be at least 3 characters"):(e=!0,m("")),e})()&&(y(""),N({variables:{input:{title:r,level:l,type:b}}}).then((function(e){t.push("/modules/true")})).catch((function(e){y(e.toString())})))};return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/",startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(P.jsx)(Z.a,{title:"Create Module"}),Object(P.jsxs)(D.a,{children:[Object(P.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&L()},error:""!==x,helperText:x}),Object(P.jsx)(ae.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:l,onChange:function(e){return u(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&L()}}),Object(P.jsx)(ae.a,{title:"type",label:"Lesson Type",margin:"normal",value:b,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&L()}}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:v})]}),Object(P.jsx)(E.a,{children:Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:L,disabled:q,endIcon:q?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),children:"Save"})})]})]})})),Oe=Object($.a)((function(){return Object(L.a)({progressWrapper:{minHeight:"-webkit-fill-available",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(P.jsx)("div",{className:t.progressWrapper,children:Object(P.jsx)(U.a,{})})})),he=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=e.match,i=Object(A.useState)(""),r=Object(k.a)(i,2),c=r[0],o=r[1],s=Object(A.useState)(0),l=Object(k.a)(s,2),u=l[0],j=l[1],d=Object(A.useState)(""),b=Object(k.a)(d,2),O=b[0],h=b[1],p=Object(A.useState)(""),x=Object(k.a)(p,2),m=x[0],g=x[1],f=Object(A.useState)(""),v=Object(k.a)(f,2),y=v[0],w=v[1],S=a.params.id,N=Object(ce.useQuery)(le,{variables:{id:S}}),q=N.loading,L=N.error,$=N.data,Q=Object(ce.useMutation)(je),B=Object(k.a)(Q,2),H=B[0],z=B[1].loading,_=function(){(function(){var e=!1;return c.length<3?g("Title must be at least 3 characters"):(e=!0,g("")),e})()&&(w(""),H({variables:{id:S,input:{title:c,level:u,type:O}}}).then((function(e){t.push("/module/".concat(e.data.updateModule.id))})).catch((function(e){console.log("error",e),w(e.toString())})))};return Object(A.useEffect)((function(){$&&$.getModule&&(o($.getModule.title),j($.getModule.level),h($.getModule.type))}),[$]),q?Object(P.jsx)(Oe,{}):L?Object(P.jsx)(ne,{message:L.message}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/",startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(P.jsx)(Z.a,{title:"Edit Module"}),Object(P.jsxs)(D.a,{children:[Object(P.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:c,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&_()},error:""!==m,helperText:m}),Object(P.jsx)(ae.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:u,onChange:function(e){return j(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&_()}}),Object(P.jsx)(ae.a,{title:"type",label:"Lesson Type",margin:"normal",value:O,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&_()}}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:y})]}),Object(P.jsx)(E.a,{children:Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:_,disabled:q||z,endIcon:q||z?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),children:"Save"})})]})]})})),pe=n(245),xe=n(247),me=n(249),ge=n(224),fe=n(251),ve=n(246),ye=n(248),we=n(242),Ce=n(252),Se=n(235),ke=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object(P.jsx)(Se.a,{component:C.b,to:n,children:a}):Object(P.jsx)("div",{children:a})},Ae=n(277),Ie=n(237),Ne=n(238),qe=n(239),Le=n(240),Te=n(241),De=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.module,i=e.handleClose,r=I.a.useState(""),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(ce.useMutation)(de),u=Object(k.a)(l,2),j=u[0],d=u[1].loading;return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsxs)(Ae.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"edit-module-dialog",children:[Object(P.jsx)(Ie.a,{children:"Confirmation"}),Object(P.jsx)(Ne.a,{children:Object(P.jsx)(qe.a,{children:"Are you sure you want to delete this module?"})}),Object(P.jsxs)(Le.a,{children:[Object(P.jsx)(M.a,{color:"primary",variant:"contained",onClick:function(){return i(!1)},endIcon:Object(P.jsx)(Te.a,{}),children:"Cancel"}),Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;j({variables:{id:e}}).then((function(e){if(!0===e.data.deleteModule)return t.push("/modules/true");s("Could not delete Module")})).catch((function(e){s(e.toString())}))},disabled:d,endIcon:d?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(we.a,{}),children:"Confirm"})]})]}),Object(P.jsx)(K.a,{open:""!==o,autoHideDuration:6e3,onClose:function(){return s("")},message:o})]})})),Fe=n(173),Ee=n(253),Me=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object(P.jsx)(Se.a,{component:C.b,to:n,children:a}):Object(P.jsx)("div",{children:a})},$e=Object(ce.gql)(d||(d=Object(oe.a)(["\n  query getLessons {\n    getLessons {\n      id\n      module {\n        id\n        title\n      }\n      questions {\n        id\n        text {\n          text\n        }\n      }\n    }\n  }\n"]))),Qe=Object(ce.gql)(b||(b=Object(oe.a)(["\n  query getLesson($id: String!) {\n    getLesson(id: $id) {\n      id\n      createdAt\n      updatedAt\n      module {\n        id\n      }\n      questions {\n        id\n        text {\n          id\n          text\n        }\n        type\n        answer\n        answerArr\n      }\n    }\n  }\n"]))),Pe=Object(ce.gql)(O||(O=Object(oe.a)(["\n  mutation addLesson($module: String!, $input: LessonValidator!) {\n    addLesson(module: $module, input: $input) {\n      id\n    }\n  }\n"]))),Be=(Object(ce.gql)(h||(h=Object(oe.a)(["\n  mutation updateLesson($id: String!, $input: LessonValidator!) {\n    updateLesson(id: $id, input: $input) {\n      id\n      title\n      level\n      type\n    }\n  }\n"]))),Object(ce.gql)(p||(p=Object(oe.a)(["\n  mutation deleteLesson($id: String!) {\n    deleteLesson(id: $id)\n  }\n"])))),He=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.lesson,i=e.handleClose,r=I.a.useState(""),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(ce.useMutation)(Be),u=Object(k.a)(l,2),j=u[0],d=u[1].loading;return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsxs)(Ae.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"edit-lesson-dialog",children:[Object(P.jsx)(Ie.a,{children:"Confirmation"}),Object(P.jsx)(Ne.a,{children:Object(P.jsx)(qe.a,{children:"Are you sure you want to delete this lesson?"})}),Object(P.jsxs)(Le.a,{children:[Object(P.jsx)(M.a,{color:"primary",variant:"contained",onClick:function(){return i(!1)},endIcon:Object(P.jsx)(Te.a,{}),children:"Cancel"}),Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;j({variables:{id:e}}).then((function(e){if(!0===e.data.deleteLesson)return t.push("/module/".concat(a.module.id,"/true"));s("Could not delete Lesson")})).catch((function(e){s(e.toString())}))},disabled:d,endIcon:d?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(we.a,{}),children:"Confirm"})]})]}),Object(P.jsx)(K.a,{open:""!==o,autoHideDuration:6e3,onClose:function(){return s("")},message:o})]})})),ze=n(250),_e=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object(P.jsx)(Se.a,{component:C.b,to:n,children:a}):Object(P.jsx)("div",{children:a})},Re=Object(ce.gql)(x||(x=Object(oe.a)(["\n  query getQuestions {\n    getQuestions {\n      id\n      title\n      level\n      lessons {\n        id\n      }\n    }\n  }\n"]))),We=Object(ce.gql)(m||(m=Object(oe.a)(["\n  query getQuestionTypes {\n    getQuestionTypes\n  }\n"]))),Ue=Object(ce.gql)(g||(g=Object(oe.a)(["\n  query getQuestion($id: String!) {\n    getQuestion(id: $id) {\n      id\n      image\n      type\n      createdAt\n      options\n      points\n      answer\n      answerArr\n      answerHint\n      text {\n        id\n        text\n        order\n        note {\n          id\n        }\n      }\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Ke=Object(ce.gql)(f||(f=Object(oe.a)(["\n  mutation addQuestion($lessonId: String!, $input: QuestionValidator!) {\n    addQuestion(lessonId: $lessonId, input: $input) {\n      id\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Ve=Object(ce.gql)(v||(v=Object(oe.a)(["\n  mutation updateQuestion($id: String!, $input: QuestionValidator!) {\n    updateQuestion(id: $id, input: $input) {\n      id\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Je=Object(ce.gql)(y||(y=Object(oe.a)(["\n  mutation deleteQuestion($id: String!) {\n    deleteQuestion(id: $id)\n  }\n"]))),Ye=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.question,i=e.handleClose,r=I.a.useState(""),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(ce.useMutation)(Je),u=Object(k.a)(l,2),j=u[0],d=u[1].loading;return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsxs)(Ae.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"edit-question-dialog",children:[Object(P.jsx)(Ie.a,{children:"Confirmation"}),Object(P.jsx)(Ne.a,{children:Object(P.jsx)(qe.a,{children:"Are you sure you want to delete this question?"})}),Object(P.jsxs)(Le.a,{children:[Object(P.jsx)(M.a,{color:"primary",variant:"contained",onClick:function(){return i(!1)},endIcon:Object(P.jsx)(Te.a,{}),children:"Cancel"}),Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;j({variables:{id:e}}).then((function(e){if(!0===e.data.deleteQuestion)return t.push("/lesson/".concat(a.lesson.id,"/true"));s("Could not delete Question")})).catch((function(e){s(e.toString())}))},disabled:d,endIcon:d?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(we.a,{}),children:"Confirm"})]})]}),Object(P.jsx)(K.a,{open:""!==o,autoHideDuration:6e3,onClose:function(){return s("")},message:o})]})})),Ge=n(243),Xe=n(278),Ze=n(236),et=n(244),tt=Object(Ge.a)((function(e){return Object(L.a)({preview:{height:200,minWidth:200,margin:"".concat(e.spacing(2),"px auto"),backgroundSize:"contain"},cardText:{textAlign:"center"}})})),nt=function(e){var t=e.photo,n=tt(),a=I.a.useState(!0),i=Object(k.a)(a,2),r=i[0],c=i[1],o=I.a.useState(""),s=Object(k.a)(o,2),l=s[0],u=s[1];return Object(A.useEffect)((function(){t&&""===l?(u(t),c(!1)):c(!1)}),[l,t]),r?Object(P.jsx)(Oe,{}):l?Object(P.jsx)(Ze.a,{in:!0,children:Object(P.jsx)(et.a,{image:l,className:n.preview})}):Object(P.jsx)(ne,{message:"Could not preview image"})},at=Object(Ge.a)((function(e){return Object(L.a)({previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",textAlign:"center",padding:e.spacing(2),margin:e.spacing(2),height:"55vh"},optionChip:{background:"#e0e0e06b",borderRadius:8,fontWeight:800,margin:e.spacing(1)},doneButton:{width:"90%"}})})),it=function(e){var t=e.question,n=at();return Object(P.jsxs)(T.a,{className:n.previewContainer,children:[Object(P.jsx)(F.a,{variant:"h3",children:t.text.map((function(e){return e.note?Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)("span",{style:{color:"#ff9100",textDecoration:"underline"},children:e.text}),Object(P.jsx)("span",{children:" "})]},e.text):e.text+" "}))}),Object(P.jsx)(nt,{photo:t.image.includes("base64")?t.image:Y.server_url+"/images/"+t.image}),Object(P.jsx)("div",{children:t.options.map((function(e){return Object(P.jsx)(Xe.a,{label:e,className:n.optionChip},e)}))}),Object(P.jsx)(M.a,{variant:"contained",disabled:!0,className:n.doneButton,onClick:function(){},children:"Done"})]})},rt=Object($.a)((function(e){var t=e.palette,n=e.spacing;return Object(L.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=(e.classes,e.question),i=e.link,r=void 0===i?null:i,c=e.delay,o=void 0===c?0:c,s=e.lessonId,l=void 0===s?null:s,u=(e.disableHeight,I.a.useState(null)),j=Object(k.a)(u,2),d=j[0],b=j[1],O=I.a.useState(!1),h=Object(k.a)(O,2),p=h[0],x=h[1],m=Boolean(d);return t?Object(P.jsx)(pe.a,{in:!0,style:{transitionDelay:"".concat(o,"ms")},children:Object(P.jsxs)(_e,{link:r,children:[Object(P.jsx)(Z.a,{title:a.text.map((function(e){return e.text+" "})),subheader:"MULTIPLE_CHOICE"===a.type?"Answer: "+a.answerArr.map((function(e){return e})):"Answer: "+a.answer,action:t&&Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(_.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},children:Object(P.jsx)(ve.a,{})}),Object(P.jsxs)(R.a,{id:"menu",anchorEl:d,open:m,onClose:function(){b(null)},children:[Object(P.jsxs)(W.a,{component:C.b,to:"/update/question/".concat(l||a.lesson.id,"/").concat(a.id),children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(ye.a,{})}),Object(P.jsx)(me.a,{primary:"Edit"})]}),Object(P.jsxs)(W.a,{onClick:function(){return x(!0)},children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(we.a,{})}),Object(P.jsx)(me.a,{primary:"Delete"})]})]})]})}),Object(P.jsxs)(D.a,{children:[Object(P.jsx)(it,{question:a}),Object(P.jsx)(Ye,{open:p,question:a,handleClose:x,history:n})]})]})}):Object(P.jsx)(I.a.Fragment,{children:Object(P.jsxs)(Fe.a,{button:!0,component:C.b,to:"/question/".concat(a.id),children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(ze.a,{})}),Object(P.jsx)(me.a,{primary:a.text.map((function(e){return e.text+" "})),secondary:"MULTIPLE_CHOICE"===a.type?"Answer: "+a.answerArr.map((function(e){return e})):"Answer: "+a.answer})]})})})),ct=Object($.a)((function(e){var t=e.palette,n=e.spacing;return Object(L.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{height:200},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.classes,i=e.lesson,r=e.link,c=void 0===r?null:r,o=e.delay,s=void 0===o?0:o,l=e.disableHeight,u=void 0===l||l,j=I.a.useState(null),d=Object(k.a)(j,2),b=d[0],O=d[1],h=I.a.useState(!1),p=Object(k.a)(h,2),x=p[0],m=p[1],g=Boolean(b);return t?Object(P.jsx)(pe.a,{in:!0,style:{transitionDelay:"".concat(s,"ms")},children:Object(P.jsx)(T.a,{className:u?a.fixedHeightCard:a.card,children:Object(P.jsxs)(Me,{link:c,children:[Object(P.jsx)(Z.a,{title:"Lesson",subheader:new Date(i.createdAt).toDateString(),action:t&&Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(_.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){O(e.currentTarget)},children:Object(P.jsx)(ve.a,{})}),Object(P.jsx)(R.a,{id:"menu",anchorEl:b,open:g,onClose:function(){O(null)},children:Object(P.jsxs)(W.a,{onClick:function(){return m(!0)},children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(we.a,{})}),Object(P.jsx)(me.a,{primary:"Delete"})]})})]})}),Object(P.jsx)(D.a,{children:t?Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(ge.a,{children:i.questions.map((function(e){return Object(P.jsx)(rt,{lessonId:i.id,history:n,question:e,displayActions:!1},e.id)}))}),Object(P.jsx)(He,{open:x,lesson:i,handleClose:m,history:n}),Object(P.jsx)(fe.a,{className:a.fab,component:C.b,"aria-label":"Add Lesson",color:"secondary",to:"/create/question/".concat(i.id),children:Object(P.jsx)(Ce.a,{})})]}):Object(P.jsxs)(F.a,{variant:"body2",children:[i.lessons.length," Lesson",i.lessons.length>1?"s":""]})})]})})}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsxs)(Fe.a,{button:!0,component:C.b,to:"/lesson/".concat(i.id),children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(Ee.a,{})}),Object(P.jsx)(me.a,{primary:"Lesson",secondary:"Last Updated: ".concat(new Date(i.updatedAt).toDateString())})]}),Object(P.jsx)(He,{open:x,lesson:i,handleClose:m,history:n})]})})),ot=Object($.a)((function(e){var t=e.palette,n=e.spacing;return Object(L.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{margin:"".concat(n(4),"px auto")},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.classes,i=e.module,r=e.link,c=void 0===r?null:r,o=e.delay,s=void 0===o?0:o,l=e.disableHeight,u=void 0===l||l,j=e.refetch,d=void 0===j?function(){}:j,b=I.a.useState(null),O=Object(k.a)(b,2),h=O[0],p=O[1],x=I.a.useState(!1),m=Object(k.a)(x,2),g=m[0],f=m[1],v=I.a.useState(""),y=Object(k.a)(v,2),w=y[0],S=y[1],A=Object(ce.useMutation)(Pe),N=Object(k.a)(A,2),q=N[0],L=N[1].loading,E=Boolean(h);return Object(P.jsx)(pe.a,{in:!0,style:{transitionDelay:"".concat(s,"ms")},children:Object(P.jsx)(T.a,{className:u?a.fixedHeightCard:a.card,children:Object(P.jsxs)(ke,{link:c,children:[Object(P.jsx)(Z.a,{title:i.title,subheader:new Date(i.createdAt).toDateString(),action:t&&Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(_.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:Object(P.jsx)(ve.a,{})}),Object(P.jsxs)(R.a,{id:"menu",anchorEl:h,open:E,onClose:function(){p(null)},children:[Object(P.jsxs)(W.a,{component:C.b,to:"/update/module/".concat(i.id),children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(ye.a,{})}),Object(P.jsx)(me.a,{primary:"Edit"})]}),Object(P.jsxs)(W.a,{onClick:function(){return f(!0)},children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(we.a,{})}),Object(P.jsx)(me.a,{primary:"Delete"})]})]})]})}),Object(P.jsx)(D.a,{children:t?Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(ge.a,{children:i.lessons.map((function(e){return Object(P.jsx)(ct,{history:n,lesson:e,link:"/lesson/".concat(e.id),displayActions:!1},e.id)}))}),Object(P.jsx)(De,{open:g,module:i,handleClose:f,history:n}),Object(P.jsx)(fe.a,{className:a.fab,disabled:L,"aria-label":"Add Lesson",color:"secondary",onClick:function(){q({variables:{module:i.id,input:{level:i.level}}}).then((function(){d(),S("Lesson Added")})).catch((function(e){console.log("error!",e),S("Error adding Lesson: "+e.toString())}))},children:L?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(Ce.a,{})}),Object(P.jsx)(K.a,{open:""!==w,autoHideDuration:6e3,onClose:function(){return S("")},message:w})]}):Object(P.jsxs)(F.a,{variant:"body2",children:[i.lessons.length," Lesson",i.lessons.length>1?"s":""]})})]})})})})),st=Object(N.g)((function(e){var t=e.history,n=e.match.params,a=n.id,i=n.newFetch,r=Object(ce.useQuery)(le,{variables:{id:a}}),c=r.loading,o=r.error,s=r.data,l=r.refetch;return c?Object(P.jsx)(Oe,{}):o||!s.getModule?Object(P.jsx)(ne,{message:o?o.message:"Could not load Module"}):(i&&(l(),t.push("/module/".concat(s.getModule.id))),Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/modules",startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsx)("div",{style:{position:"relative"},children:Object(P.jsx)(ot,{module:s.getModule,history:t,displayActions:!0,disableHeight:!1,refetch:l})})]}))})),lt=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,i=Object(ce.useQuery)(se),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),a.push("/modules")),r?Object(P.jsx)(Oe,{}):c?Object(P.jsx)(ne,{message:c.message}):Object(P.jsxs)(I.a.Fragment,{children:[o.getModules.length<1?Object(P.jsx)(ne,{message:"No Modules Found"}):o.getModules.map((function(e){return Object(P.jsx)(ot,{history:a,displayActions:!1,module:e,link:"/module/".concat(e.id)},e.id)})),Object(P.jsx)(fe.a,{className:t.fab,component:C.b,"aria-label":"Add Module",color:"secondary",to:"/create/module",children:Object(P.jsx)(Ce.a,{})})]})})),ut=n(43),jt=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(A.useState)(""),i=Object(k.a)(a,2),r=i[0],c=i[1],o=Object(A.useState)(0),s=Object(k.a)(o,2),l=s[0],u=s[1],j=Object(A.useState)(""),d=Object(k.a)(j,2),b=d[0],O=d[1],h=Object(A.useState)(""),p=Object(k.a)(h,2),x=p[0],m=p[1],g=Object(A.useState)(""),f=Object(k.a)(g,2),v=f[0],y=f[1],S=Object(ce.useMutation)(Pe,{update:function(e,t){var n=t.data.addLesson;e.modify({fields:{lessons:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.writeFragment({data:n,fragment:Object(ce.gql)(w||(w=Object(oe.a)(["\n                fragment NewLesson on Lesson {\n                  __typename\n                  id\n                  title\n                  level\n                  type\n                }\n              "])))});return[].concat(Object(ut.a)(t),[a])}}})}}),N=Object(k.a)(S,2),q=N[0],L=N[1].loading,$=function(){(function(){var e=!1;return r.length<3?m("Title must be at least 3 characters"):(e=!0,m("")),e})()&&(y(""),q({variables:{input:{title:r,level:l,type:b}}}).then((function(e){t.push("/lessons/true")})).catch((function(e){y(e.toString())})))};return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/",startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(P.jsx)(Z.a,{title:"Create Lesson"}),Object(P.jsxs)(D.a,{children:[Object(P.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&$()},error:""!==x,helperText:x}),Object(P.jsx)(ae.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:l,onChange:function(e){return u(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&$()}}),Object(P.jsx)(ae.a,{title:"type",label:"Lesson Type",margin:"normal",value:b,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&$()}}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:v})]}),Object(P.jsx)(E.a,{children:Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:$,disabled:L,endIcon:L?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),children:"Save"})})]})]})})),dt=Object(N.g)((function(e){var t=e.history,n=e.match,a=n.params.id,i=Object(ce.useQuery)(Qe,{variables:{id:a}}),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),t.push("/lesson/".concat(a))),r?Object(P.jsx)(Oe,{}):c||!o.getLesson?Object(P.jsx)(ne,{message:c?c.message:"Could not load Lesson"}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/module/".concat(o.getLesson.module.id),startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsx)("div",{style:{position:"relative"},children:Object(P.jsx)(ct,{lesson:o.getLesson,history:t,displayActions:!0,disableHeight:!1})})]})})),bt=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,i=Object(ce.useQuery)($e),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),a.push("/lessons")),r?Object(P.jsx)(Oe,{}):c?Object(P.jsx)(ne,{message:c.message}):Object(P.jsxs)(I.a.Fragment,{children:[o.getLessons.length<1?Object(P.jsx)(ne,{message:"No Lessons Found"}):o.getLessons.map((function(e){return Object(P.jsx)(ct,{history:a,displayActions:!1,lesson:e,link:"/lesson/".concat(e.id)},e.id)})),Object(P.jsx)(fe.a,{className:t.fab,component:C.b,"aria-label":"Add Lesson",color:"secondary",to:"/create/lesson",children:Object(P.jsx)(Ce.a,{})})]})})),Ot=n(25),ht=n(281),pt=n(264),xt=n(271),mt=n(222),gt=n(257),ft=n(141),vt=n(276),yt=n(258),wt=n(233),Ct=n(255),St=n(256),kt=n(254),At=n(138);function It(e){var t=e.items,n=e.swapDistance,a=e.onPositionUpdate,i=e.onPositionChange,r=Object(A.useState)(-1),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(A.useCallback)((function(e,i){var r=function(e,t,n,a){var i=e;if(t>0){if(e===n-1)return e;t>a&&(i=e+1)}else if(t<0){if(0===e)return e;t<-a&&(i=e-1)}return Math.min(Math.max(i,0),n)}(e,i,t.length,n);r!==e&&a(e,r)}),[t.length,n,a]),u=Object(A.useCallback)((function(e){i&&o!==e&&i(o,e),s(-1)}),[o,i]);return{handleChange:l,handleDragStart:s,handleDragEnd:u}}var Nt,qt,Lt,Tt,Dt,Ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case"dragging":return t+3;case"animating":return t+2;default:return t+1}};function Et(e){var t=e.index,n=e.height,a=e.item,i=e.itemProps,r=e.listItem,c=function(e,t){var n=t.handleChange,a=t.handleDragStart,i=t.handleDragEnd,r=Object(A.useState)("idle"),c=Object(k.a)(r,2),o=c[0],s=c[1];return[o,{onDragStart:function(){s("dragging"),a(e)},onDragEnd:function(){s("animating"),i(e)},onAnimationComplete:function(){"animating"===o&&s("idle")},onViewportBoxUpdate:function(t,a){"dragging"===o&&n(e,a.y.translate)}}]}(t,i),o=Object(k.a)(c,2),s=o[0],l=o[1];return Object(P.jsx)("div",{style:{padding:0,height:n,zIndex:Ft(s)},children:Object(P.jsx)(At.a.div,Object(Ot.a)(Object(Ot.a)({layout:!0,initial:!1,drag:"y",style:{height:n,borderRadius:5},whileHover:{scale:1.03,boxShadow:"0px 3px 3px rgba(0,0,0,0.15)"},whileTap:{scale:1.12,boxShadow:"0px 5px 5px rgba(0,0,0,0.1)"}},l),{},{children:r(a)}))})}function Mt(e){var t=e.items,n=e.setItems,a=e.listItem,i=Object(A.useCallback)((function(e,a){n(function(e,t,n){var a=Object(ut.a)(e);return a[n]=e[t],a[t]=e[n],a}(t,e,a))}),[t,n]),r=It({items:t,swapDistance:60,onPositionUpdate:i});return Object(P.jsx)(I.a.Fragment,{children:t.map((function(e,t){return Object(P.jsx)(Et,{index:t,height:60,item:Object(Ot.a)({i:t},e),listItem:a,itemProps:r},e.id)}))})}var $t=Object(ce.gql)(Nt||(Nt=Object(oe.a)(["\n  query getNotes {\n    getNotes {\n      id\n      title\n      markdown\n      sanitizedHtml\n    }\n  }\n"]))),Qt=(Object(ce.gql)(qt||(qt=Object(oe.a)(["\n  query getNote($id: String!) {\n    getNote(id: $id) {\n      id\n      title\n      markdown\n      sanitizedHtml\n    }\n  }\n"]))),Object(ce.gql)(Lt||(Lt=Object(oe.a)(["\n  mutation addNote($questionText: String!, $input: NoteValidator!) {\n    addNote(questionText: $questionText, input: $input) {\n      id\n    }\n  }\n"])))),Pt=(Object(ce.gql)(Tt||(Tt=Object(oe.a)(["\n  mutation updateNote($id: String!, $input: NoteValidator!) {\n    updateNote(id: $id, input: $input) {\n      id\n    }\n  }\n"]))),Object(ce.gql)(Dt||(Dt=Object(oe.a)(["\n  mutation deleteNote($id: String!) {\n    deleteNote(id: $id)\n  }\n"]))),function(e){var t=e.newNote,n=Object(A.useState)(""),a=Object(k.a)(n,2),i=a[0],r=a[1],c=Object(A.useState)(""),o=Object(k.a)(c,2),s=o[0],l=o[1],u=Object(A.useState)(""),j=Object(k.a)(u,2),d=j[0],b=j[1],O=Object(A.useState)(""),h=Object(k.a)(O,2),p=h[0],x=h[1],m=Object(A.useState)(!1),g=Object(k.a)(m,2),f=g[0],v=g[1],y=Object(ce.useMutation)(Qt),w=Object(k.a)(y,1)[0],C=Object(A.useState)(""),S=Object(k.a)(C,2),I=S[0],N=S[1];return Object(P.jsxs)("div",{children:[Object(P.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:i,onChange:function(e){return r(e.target.value)},error:""!==s,helperText:s}),Object(P.jsx)(ae.a,{"aria-label":"Note content",rows:8,label:"Add your note content...",placeholder:"Add your note content...",multiline:!0,value:d,onChange:function(e){return b(e.target.value)},error:""!==p,helperText:p}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:I}),Object(P.jsx)(M.a,{disabled:f,endIcon:f?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),variant:"contained",color:"primary",onClick:function(){(i.length<3?(l("Title must be at least 3 characters"),0):(l(""),d.length<5?(x("Note must be at least 5 characters"),0):(x(""),1)))&&(v(!0),N(""),w({variables:{questionText:"",input:{title:i,markdown:d}}}).then((function(e){t(i,e.data.addNote.id)})).catch((function(e){v(!1),N(e.toString())})))},children:"Save"})]})}),Bt=Object(Ge.a)((function(){return Object(L.a)({iconButton:{padding:10}})})),Ht=function(e){var t=e.i,n=e.onSelect,a=e.hasNote,i=void 0!==a&&a,r=Bt(),c=Object(ce.useQuery)($t),o=c.loading,s=c.error,l=c.data,u=c.refetch,j=Object(A.useState)(!1),d=Object(k.a)(j,2),b=d[0],O=d[1],h=Object(A.useState)(""),p=Object(k.a)(h,2),x=p[0],m=p[1],g=Object(A.useState)(!1),f=Object(k.a)(g,2),v=f[0],y=f[1],w=function(e){n(t,e),y(!1)},C=l&&l.getNotes?l.getNotes.filter((function(e){return""===x||e.title.toLowerCase().includes(x.toLowerCase())})):[];return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(_.a,{onClick:function(){return y(!0)},color:i?"primary":"default",className:r.iconButton,"aria-label":"Add a link to text",children:Object(P.jsx)(kt.a,{})}),Object(P.jsxs)(Ae.a,{open:v,onClose:function(){return y(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(P.jsx)(Ie.a,{id:"alert-dialog-title",children:"Attach a note to this text"}),Object(P.jsxs)(Ne.a,{children:[Object(P.jsx)(qe.a,{id:"alert-dialog-description",children:"Attaching a note allows the user to select this piece of text, and view more details about it"}),b?Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{startIcon:Object(P.jsx)(ie.a,{}),onClick:function(){return O(!1)},children:"Back"}),Object(P.jsx)(Pt,{newNote:function(e,t){u(),m(e),O(!1),w(t)}})]}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(ae.a,{title:"Search notes",label:"Search existing notes",autoFocus:!0,margin:"normal",value:x,onChange:function(e){return m(e.target.value)}}),Object(P.jsx)(ge.a,{children:s?Object(P.jsx)(ne,{message:s.message}):o?Object(P.jsx)(Oe,{}):C.length>0?C.map((function(e){return Object(P.jsx)(Fe.a,{button:!0,onClick:function(){return w(e.id)},children:Object(P.jsx)(me.a,{children:e.title})},e.id)})):Object(P.jsxs)("div",{children:[Object(P.jsx)(F.a,{children:"Could not find any notes"}),Object(P.jsx)(M.a,{color:"primary",onClick:function(){return O(!0)},children:"Create one"})]})})]})]})]})]})},zt=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)},inputContainer:{padding:"2px 4px",display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"80%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},listItem:{cursor:"move"}})})),_t=function(){var e=zt(),t=Sn(),n=Object(k.a)(t,2),a=n[0],i=n[1],r=Object(A.useState)(""),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(A.useState)(""),u=Object(k.a)(l,2),j=u[0],d=u[1],b=Object(A.useState)(-1),O=Object(k.a)(b,2),h=O[0],p=O[1],x=Object(A.useState)((function(){return[]})),m=Object(k.a)(x,2),g=m[0],f=m[1],v=Object(A.createRef)(),y=Object(A.useCallback)((function(){var e=a;return e.text=g.map((function(e,t){return{order:t,text:e.text,note:e.note}})),i(e)}),[g,a,i]);Object(A.useEffect)((function(){if(a.text.length>0&&0===g.length){var e=a.text.map((function(e,t){return{id:t,text:e.text}}));return f(e)}y()}),[a,g,y]);var w=function(e){if(e.preventDefault(),o.length<1)return d("Text must be at least one character");if(-1!==h){var t=g.findIndex((function(e){return e.id===h}));f((function(e){return e[t].text=o,Object(ut.a)(e)})),p(-1)}else{var n={id:g.length+1,text:o};f((function(e){return[].concat(Object(ut.a)(e),[n])}))}s(""),d("")},C=function(e,t){var n=g.findIndex((function(t){return t.id===e})),a=g;a[n].note=t,f(Object(ut.a)(a)),y()};return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"Add Question Text"}),Object(P.jsxs)(ft.a,{className:e.inputContainer,children:[Object(P.jsx)(vt.a,{className:e.input,placeholder:"Add a new text item",inputProps:{"aria-label":"Add item"},autoFocus:!0,inputRef:v,value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&w(e)},error:""!==j}),Object(P.jsx)(mt.a,{in:-1!==h,children:Object(P.jsx)(_.a,{className:e.iconButton,"aria-label":"Cancel edit",onClick:function(){p(-1),s("")},children:Object(P.jsx)(Te.a,{})})}),Object(P.jsx)(_.a,{className:e.iconButton,"aria-label":-1!==h?"Edit":"Create",onClick:w,children:-1!==h?Object(P.jsx)(St.a,{}):Object(P.jsx)(Ce.a,{})}),Object(P.jsx)(yt.a,{className:e.divider,orientation:"vertical"}),Object(P.jsx)(_.a,{className:e.iconButton,"aria-label":"Add a link to text",children:Object(P.jsx)(kt.a,{})})]}),Object(P.jsx)(wt.a,{error:!0,children:j}),Object(P.jsx)(ge.a,{children:Object(P.jsx)(Mt,{items:g,setItems:f,listItem:function(t){var n=t.id,a=t.text,i=t.note,r=void 0===i?"":i;return Object(P.jsxs)(Fe.a,{className:e.listItem,children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(Ct.a,{})}),Object(P.jsx)(mt.a,{in:!0,children:Object(P.jsx)(me.a,{children:a})}),Object(P.jsx)(xe.a,{children:Object(P.jsx)(_.a,{onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e}));p(e),s(g[t].text),v&&v.current&&v.current.focus()}(n)},children:Object(P.jsx)(St.a,{})})}),Object(P.jsx)(gt.a,{children:Object(P.jsx)(_.a,{"aria-label":"comments",onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e})),n=g;n.splice(t,1),f(Object(ut.a)(n)),y()}(n)},children:Object(P.jsx)(we.a,{})})}),Object(P.jsx)(Ht,{i:n,hasNote:""!==r,onSelect:C}),Object(P.jsx)(xe.a,{})]})}})})]})},Rt=n(80),Wt=n.n(Rt),Ut=n(109),Kt=n(259),Vt=n(260),Jt=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)},label:{display:"flex",flexDirection:"column",margin:"".concat(e.spacing(4),"px auto")},input:{display:"none"},uploadHelpText:{textAlign:"center"}})})),Yt=function(){var e=Jt(),t=Sn(),n=Object(k.a)(t,2),a=n[0],i=n[1],r=Object(A.useState)(!1),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(A.useState)(""),u=Object(k.a)(l,2),j=u[0],d=u[1];Object(A.useEffect)((function(){if(""!==a.image)return s(!0);s(!1)}),[a,o]);var b=function(){var e=Object(Ut.a)(Wt.a.mark((function e(t){var n,r,c;return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return",d("Please upload an image"));case 2:if(!((n=t.target.files[0]).size>6145728)){e.next=5;break}return e.abrupt("return",d("Upload cannot be greater than 6 MegaBytes"));case 5:return d(""),e.prev=6,e.next=9,O(n);case 9:if("string"!==typeof(r=e.sent)){e.next=15;break}return(c=a).image=r,i(c),e.abrupt("return",s(!0));case 15:d("Could not upload image"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),d("Could not upload file: "+e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return new Promise(function(){var t=Object(Ut.a)(Wt.a.mark((function t(n,a){var i;return Wt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new FileReader).onload=function(){return n(i.result)},i.onerror=function(e){return a(e)},i.readAsDataURL(e);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"Add an Image"}),o?Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(nt,{photo:a.image.includes("base64")?a.image:Y.server_url+"/images/"+a.image}),Object(P.jsx)("br",{}),Object(P.jsx)(M.a,{variant:"contained",color:"secondary",onClick:function(){return function(){var e=a;e.image="",s(!1),i(e)}()},endIcon:Object(P.jsx)(Kt.a,{}),className:e.label,children:"Clear"})]}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)("input",{accept:".jpg, .png, .jpeg",className:e.input,id:"photo-upload",type:"file",name:"photo-upload",onChange:function(e){return b(e)}}),Object(P.jsx)(Ze.a,{in:!0,children:Object(P.jsxs)("label",{htmlFor:"photo-upload",className:e.label,children:[Object(P.jsx)(M.a,{variant:"contained",color:"secondary",component:"span",endIcon:Object(P.jsx)(Vt.a,{}),children:"Upload"}),Object(P.jsx)(wt.a,{error:""!==j,className:e.uploadHelpText,children:j||"Maximum Size: 6 MB"})]})})]})]})},Gt=n(231),Xt=n(232),Zt=n(279),en=n(261),tn=n(270),nn=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),an=function(){var e=nn(),t=Sn(),n=Object(k.a)(t,2),a=n[0],i=n[1],r=a.questionTypeOptions.length<1?["Multiple Choice","Text"]:a.questionTypeOptions,c=function(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")};return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"Select Question Type"}),Object(P.jsxs)(Gt.a,{component:"fieldset",children:[Object(P.jsx)(Xt.a,{component:"legend",children:"Question Type"}),Object(P.jsx)(Zt.a,{"aria-label":"question-type",name:"question-type",defaultValue:a.type,value:c(a.type.replace("_"," ").toLowerCase()),onChange:function(e){var t=a;t.type=c(e.target.value.replace("_"," ").toLowerCase()),i(Object(Ot.a)({},t))},children:r.map((function(e){return Object(P.jsx)(en.a,{value:c(e.replace("_"," ").toLowerCase()),control:Object(P.jsx)(tn.a,{}),label:e},e)}))})]})]})},rn=n(272),cn=n(262),on=n(263),sn=n(268),ln=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),un=function(){var e=ln(),t=Sn(),n=Object(k.a)(t,2),a=n[0],i=n[1],r=Object(P.jsx)(cn.a,{fontSize:"small"}),c=Object(P.jsx)(on.a,{fontSize:"small"});return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"Select Question Answer"}),"MULTIPLE_CHOICE"===a.type?Object(P.jsx)(sn.a,{id:"select-question-multi-choice-answer",multiple:!0,options:a.options,getOptionLabel:function(e){return e},style:{width:300},defaultValue:a.answerArr,disableCloseOnSelect:!0,onChange:function(e,t){return function(e){var t=a;t.answerArr=e,i(t)}(t||"")},renderOption:function(e,t){var n=t.selected;return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(rn.a,{icon:r,checkedIcon:c,style:{marginRight:8},checked:n}),e]})},renderInput:function(e){return Object(P.jsx)(ae.a,Object(Ot.a)(Object(Ot.a)({},e),{},{label:"Select Question Answer",variant:"outlined"}))}}):Object(P.jsx)(sn.a,{id:"select-question-text-answer",defaultValue:a.answer,options:a.options,getOptionLabel:function(e){return e},style:{width:300},onChange:function(e,t){return function(e){var t=a;t.answer=e,i(t)}(t||"")},renderInput:function(e){return Object(P.jsx)(ae.a,Object(Ot.a)(Object(Ot.a)({},e),{},{label:"Select Question Answer",variant:"outlined"}))}})]})},jn=n(280),dn=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),bn=function(){var e=dn(),t=Sn(),n=Object(k.a)(t,2),a=n[0],i=n[1];return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"Enter Question Details"}),Object(P.jsx)(ae.a,{value:a.answerHint,onChange:function(e){return i(Object(Ot.a)(Object(Ot.a)({},a),{},{answerHint:e.target.value}))},helperText:"A hint to the user after they answer a question incorrect"}),Object(P.jsx)(F.a,{id:"points-slider",gutterBottom:!0,children:"Points"}),Object(P.jsx)(jn.a,{defaultValue:25,onChange:function(e,t){return i(Object(Ot.a)(Object(Ot.a)({},a),{},{points:t}))},"aria-labelledby":"points-slider",valueLabelDisplay:"auto",step:10,marks:!0,min:10,max:100})]})},On=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)},inputContainer:{padding:"2px 4px",display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"80%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},listItem:{cursor:"move"}})})),hn=function(){var e=On(),t=Sn(),n=Object(k.a)(t,2),a=n[0],i=n[1],r=Object(A.useState)(""),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(A.useState)(""),u=Object(k.a)(l,2),j=u[0],d=u[1],b=Object(A.useState)(-1),O=Object(k.a)(b,2),h=O[0],p=O[1],x=Object(A.useState)((function(){return[]})),m=Object(k.a)(x,2),g=m[0],f=m[1],v=Object(A.createRef)(),y=Object(A.useCallback)((function(){var e=a;e.options=g.map((function(e){return e.text})),i(e)}),[g,a,i]);Object(A.useEffect)((function(){if(a.options.length>0&&0===g.length){var e=a.options.map((function(e,t){return{id:t,text:e}}));return f(e)}g.length>0&&g.length!==a.options.length&&y()}),[a,g,y]);var w=function(e){if(e.preventDefault(),o.length<1)return d("Text must be at least one character");if(-1!==h){var t=g.findIndex((function(e){return e.id===h}));f((function(e){return e[t].text=o,Object(ut.a)(e)})),p(-1)}else{var n={id:g.length+1,text:o};f((function(e){return[].concat(Object(ut.a)(e),[n])}))}s(""),d("")};return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"Add Options"}),Object(P.jsxs)(ft.a,{className:e.inputContainer,children:[Object(P.jsx)(vt.a,{className:e.input,placeholder:"Add a new option",inputProps:{"aria-label":"Add option"},autoFocus:!0,inputRef:v,value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&w(e)},error:""!==j}),Object(P.jsx)(mt.a,{in:-1!==h,children:Object(P.jsx)(_.a,{className:e.iconButton,"aria-label":"Cancel edit",onClick:function(){p(-1),s("")},children:Object(P.jsx)(Te.a,{})})}),Object(P.jsx)(_.a,{className:e.iconButton,"aria-label":-1!==h?"Edit":"Create",onClick:w,children:-1!==h?Object(P.jsx)(St.a,{}):Object(P.jsx)(Ce.a,{})})]}),Object(P.jsx)(wt.a,{error:!0,children:j}),Object(P.jsx)(ge.a,{children:Object(P.jsx)(Mt,{items:g,setItems:f,listItem:function(t){var n=t.id,a=t.text;return Object(P.jsxs)(Fe.a,{className:e.listItem,children:[Object(P.jsx)(xe.a,{children:Object(P.jsx)(Ct.a,{})}),Object(P.jsx)(mt.a,{in:!0,children:Object(P.jsx)(me.a,{children:a})}),Object(P.jsx)(xe.a,{children:Object(P.jsx)(_.a,{onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e}));p(e),s(g[t].text),v&&v.current&&v.current.focus()}(n)},children:Object(P.jsx)(St.a,{})})}),Object(P.jsx)(gt.a,{onClick:function(){return function(e){var t=g.findIndex((function(t){return t.id===e})),n=g;console.log("removing one",n[t]),n.splice(t,1),console.log("done",n[t]),f(Object(ut.a)(n))}(n)},children:Object(P.jsx)(_.a,{edge:"end","aria-label":"comments",children:Object(P.jsx)(we.a,{})})})]})}})})]})},pn=Object(Ge.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"}})})),xn=function(e){var t=e.handleReset,n=e.history,a=pn(),i=Sn(),r=Object(k.a)(i,1)[0],c=Object(A.useState)(""),o=Object(k.a)(c,2),s=o[0],l=o[1],u=Object(A.useState)(!1),j=Object(k.a)(u,2),d=j[0],b=j[1],O=Object(ce.useMutation)(Ke),h=Object(k.a)(O,1)[0],p=Object(ce.useMutation)(Ve),x=Object(k.a)(p,1)[0];return Object(P.jsxs)("div",{className:a.root,children:[Object(P.jsx)(F.a,{variant:"h1",children:"All Steps Complete"}),Object(P.jsx)("br",{}),Object(P.jsx)(F.a,{children:"This is your new question will look like:"}),Object(P.jsx)(it,{question:r}),Object(P.jsx)(M.a,{onClick:t,children:"Go back"}),Object(P.jsx)(M.a,{variant:"contained",onClick:function(){l(""),b(!0);var e,t={requiresPiano:r.requiresPiano,text:r.text,image:r.image,options:r.options,type:(e=r.type.replace("_"," ").toLocaleLowerCase(),e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")),points:r.points,answer:r.answer,answerArr:r.answerArr,answerHint:r.answerHint};r.id?x({variables:{id:r.id,input:t}}).then((function(e){b(!1),n.push("/lesson/".concat(e.data.updateQuestion.lesson.id,"/true"))})).catch((function(e){b(!1),l(e.toString())})):h({variables:{lessonId:r.lessonId,input:t}}).then((function(e){b(!1),n.push("/lesson/".concat(e.data.addQuestion.lesson.id,"/true"))})).catch((function(e){b(!1),l(e.toString())}))},disabled:d,color:"primary",endIcon:d?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),children:"Save"}),Object(P.jsx)("br",{}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:s})]})},mn=[{title:"Add Question Text",name:"text",component:Object(P.jsx)(_t,{}),required:!0},{title:"Add Image",name:"image",component:Object(P.jsx)(Yt,{}),required:!1},{title:"Select Type",name:"type",component:Object(P.jsx)(an,{}),required:!0},{title:"Add Options",name:"options",component:Object(P.jsx)(hn,{}),required:!0},{title:"Select Answer",name:["answerArr","answer"],component:Object(P.jsx)(un,{}),required:!0},{title:"Question Details",name:["points","answerHint"],component:Object(P.jsx)(bn,{}),required:!0}],gn=Object(Ge.a)((function(e){return Object(L.a)({root:{width:"100%",position:"relative"},contentWrapper:{margin:"".concat(e.spacing(2),"px auto")},buttonContainer:{position:"fixed",bottom:0,left:0,right:0,padding:e.spacing(3)},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},completed:{display:"inline-block"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})}));var fn,vn,yn=function(e){var t,n=e.history,a=gn(),i=Sn(),r=Object(k.a)(i,1)[0],c=I.a.useState(0),o=Object(k.a)(c,2),s=o[0],l=o[1],u=I.a.useState(new Set),j=Object(k.a)(u,2),d=j[0],b=j[1],O=I.a.useState(new Set),h=Object(k.a)(O,2),p=h[0],x=h[1],m=I.a.useState(new Set),g=Object(k.a)(m,2),f=g[0],v=g[1],y=mn,w=function(){return mn.map((function(e){return e.title})).length},C=function(e){return!0!==y[e].required},S=function(){return f.size},A=function(){return d.size},N=function(){return A()===w()-S()},q=function(){var e=s!==w()-1||N()?s+1:mn.findIndex((function(e,t){return!d.has(t)}));l(e)},L=function(e){return function(){l(e)}};function D(e){return d.has(e)}function E(e){return p.has(e)}return Object(P.jsxs)("div",{className:a.root,children:[Object(P.jsx)(ht.a,{alternativeLabel:!0,nonLinear:!0,activeStep:s,children:y.map((function(e,t){var n={},a={};return C(t)&&(a.optional=Object(P.jsx)(F.a,{variant:"caption",children:"Optional"})),function(e){return f.has(e)}(t)&&(n.completed=!1),Object(P.jsx)(pt.a,Object(Ot.a)(Object(Ot.a)({},n),{},{children:E(t)?Object(P.jsx)(xt.a,Object(Ot.a)(Object(Ot.a)({onClick:L(t),completed:D(t),icon:Object(P.jsx)(ee.a,{}),style:{color:"red"}},a),{},{children:e.title})):Object(P.jsx)(xt.a,Object(Ot.a)(Object(Ot.a)({onClick:L(t),completed:D(t)},a),{},{children:e.title}))}),e.title)}))}),Object(P.jsx)("div",{children:N()?Object(P.jsx)(xn,{history:n,handleReset:function(){l(0),b(new Set),v(new Set)}}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)("div",{className:a.contentWrapper,children:(t=s,y[t].component)}),Object(P.jsxs)(T.a,{className:a.buttonContainer,children:[Object(P.jsx)(M.a,{disabled:0===s,onClick:function(){l((function(e){return e-1}))},className:a.button,children:"Back"}),C(s)&&!d.has(s)&&Object(P.jsx)(M.a,{variant:"contained",color:"primary",onClick:function(){if(!C(s))throw new Error("You can't skip a step that isn't optional.");l((function(e){return e+1})),v((function(e){var t=new Set(e.values());return t.add(s),t}))},className:a.button,children:"Skip"}),s!==mn.length&&(d.has(s)?Object(P.jsx)(M.a,{variant:"contained",color:"primary",onClick:q,className:a.button,children:"Next"}):Object(P.jsx)(M.a,{variant:"contained",color:"primary",onClick:function(){var e=new Set(d),t=new Set(p);if(x(new Set),mn[s].required)if("string"!==typeof mn[s].name){if(mn[s].name.every((function(e){return r[e].length<1})))return t.add(s),x(t)}else{var n=mn[s].name;if(r[n].length<1)return console.log("thats gotta be an error"),t.add(s),x(t)}e.add(s),b(e),d.size!==w()-S()&&q()},children:A()===w()-1?"Finish":"Next"}))]})]})})]})},wn={lessonId:"",requiresPiano:!1,text:[],image:"",options:[],type:"",points:0,answer:"",answerArr:[],answerHint:"",questionTypeOptions:[]},Cn=Object(A.createContext)([wn,function(e){return null}]),Sn=function(){return Object(A.useContext)(Cn)},kn=function(e){var t=e.history,n=e.match,a=e.update,i=void 0===a?null:a,r=I.a.useState(wn),c=Object(k.a)(r,2),o=c[0],s=c[1],l=Object(ce.useQuery)(We),u=l.loading,j=l.error,d=l.data;return Object(A.useEffect)((function(){if(!u&&!j&&d&&o.questionTypeOptions.length<1){var e=Object(Ot.a)(Object(Ot.a)({},o),{},{questionTypeOptions:d.getQuestionTypes,lessonId:i?i.lesson.id:n.params.id});i&&((e=Object(Ot.a)(Object(Ot.a)({},e),{},{id:i.id,requiresPiano:i.requiresPiano||!1,image:i.image,options:i.options,type:i.type,points:i.points,answer:i.answer,answerArr:i.answerArr,answerHint:i.answerHint})).text=i.text,console.log("update!",e.text)),s(e)}}),[o,d,j,u,n.params.id,i]),Object(P.jsx)(Cn.Provider,{value:[o,s],children:Object(P.jsx)(yn,{history:t})})},An=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.match;return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/lesson/".concat(n.params.id),startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsx)(kn,{history:t,match:n})]})})),In=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=(e.classes,e.match),a=n.params.id,i=Object(ce.useQuery)(Ue,{variables:{id:a}}),r=i.loading,c=i.error,o=i.data;return r?Object(P.jsx)(Oe,{}):c||!o.getQuestion?Object(P.jsx)(ne,{message:c?c.message:"Could not load Question"}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/question/".concat(n.params.id),startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsx)(kn,{history:t,match:n,update:o.getQuestion})]})})),Nn=Object(N.g)((function(e){var t=e.history,n=e.match.params.id,a=Object(ce.useQuery)(Ue,{variables:{id:n}}),i=a.loading,r=a.error,c=a.data;return i?Object(P.jsx)(Oe,{}):r||!c.getQuestion?Object(P.jsx)(ne,{message:r?r.message:"Could not load Question"}):Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/lesson/".concat(c.getQuestion.lesson.id),startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsx)("div",{style:{position:"relative"},children:Object(P.jsx)(rt,{question:c.getQuestion,history:t,displayActions:!0,disableHeight:!1})})]})})),qn=Object($.a)((function(e){var t=e.spacing;return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,i=Object(ce.useQuery)(Re),r=i.loading,c=i.error,o=i.data,s=i.refetch;return n.params.newFetch&&(s(),a.push("/questions")),r?Object(P.jsx)(Oe,{}):c?Object(P.jsx)(ne,{message:c.message}):Object(P.jsxs)(I.a.Fragment,{children:[o.getQuestions.length<1?Object(P.jsx)(ne,{message:"No Questions Found"}):o.getQuestions.map((function(e){return Object(P.jsx)(rt,{history:a,displayActions:!1,question:e,link:"/question/".concat(e.id)},e.id)})),Object(P.jsx)(fe.a,{className:t.fab,component:C.b,"aria-label":"Add Question",color:"secondary",to:"/create/question",children:Object(P.jsx)(Ce.a,{})})]})})),Ln=Object(ce.gql)(fn||(fn=Object(oe.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(input: { email: $email, password: $password }) {\n      token\n      expiration\n      user {\n        email\n        id\n      }\n    }\n  }\n"]))),Tn=Object(ce.gql)(vn||(vn=Object(oe.a)(["\n  mutation register($name: String!, $email: String!, $password: String!) {\n    addUser(input: { name: $name, email: $email, password: $password }) {\n      id\n      email\n    }\n  }\n"]))),Dn=[{name:"Login",link:"/login",component:Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(A.useState)(""),i=Object(k.a)(a,2),r=i[0],c=i[1],o=Object(A.useState)(""),s=Object(k.a)(o,2),l=s[0],u=s[1],j=Object(A.useState)(""),d=Object(k.a)(j,2),b=d[0],O=d[1],h=Object(A.useState)(""),p=Object(k.a)(h,2),x=p[0],m=p[1],g=I.a.useState(!1),f=Object(k.a)(g,2),v=f[0],y=f[1],w=I.a.useState(""),S=Object(k.a)(w,2),N=S[0],q=S[1],L=Object(ce.useMutation)(Ln),$=Object(k.a)(L,1)[0],B=function(){(function(){var e=!0;return r.length<3?(O("Email must be at least 3 characters"),e=!1):r.includes("@")&&r.includes(".")?O(""):(O("Please enter a valid email"),e=!1),l.length<6?(m("Password must be at least 6 characters"),e=!1):m(""),e})()&&(q(""),y(!0),$({variables:{email:r,password:l}}).then((function(e){q(""),Q.setUserDetails(e.data.login,(function(e){if(e)return t.push("/modules");q("The system encountered an error, please try again later")}))})).catch((function(e){y(!1),q(e.toString())})))};return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/",startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(P.jsx)(Z.a,{title:"Login"}),Object(P.jsxs)(D.a,{children:[Object(P.jsx)(ae.a,{name:"email",label:"Email",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&B()},error:""!==b,helperText:b}),Object(P.jsx)(ae.a,{name:"password",label:"Password",type:"password",margin:"normal",value:l,onChange:function(e){return u(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&B()},error:""!==x,helperText:x}),Object(P.jsx)("br",{}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:N}),Object(P.jsxs)(F.a,{variant:"caption",children:["Don't have an account? ",Object(P.jsx)(C.b,{to:"/register",children:"Register here"})]})]}),Object(P.jsx)(E.a,{children:Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:B,disabled:v,endIcon:v?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),children:"Login"})})]})]})})),authed:!1},{name:"Register",link:"/register",component:Object($.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,a=Object(A.useState)(""),i=Object(k.a)(a,2),r=i[0],c=i[1],o=Object(A.useState)(""),s=Object(k.a)(o,2),l=s[0],u=s[1],j=Object(A.useState)(""),d=Object(k.a)(j,2),b=d[0],O=d[1],h=Object(A.useState)(""),p=Object(k.a)(h,2),x=p[0],m=p[1],g=Object(A.useState)(""),f=Object(k.a)(g,2),v=f[0],y=f[1],w=Object(A.useState)(""),S=Object(k.a)(w,2),N=S[0],q=S[1],L=I.a.useState(!1),$=Object(k.a)(L,2),Q=$[0],B=$[1],H=I.a.useState(""),z=Object(k.a)(H,2),_=z[0],R=z[1],W=Object(ce.useMutation)(Tn),K=Object(k.a)(W,1)[0],V=function(){(function(){var e=!0;return r.length<3&&(m("Name must be at least 3 characters"),e=!1),l.length<3?(y("Email must be at least 3 characters"),e=!1):l.includes("@")&&l.includes(".")?y(""):(y("Please enter a valid email"),e=!1),b.length<6?(q("Password must be at least 6 characters"),e=!1):q(""),e})()&&(R(""),B(!0),K({variables:{name:r,email:l,password:b}}).then((function(e){return R(""),t.push("/login")})).catch((function(e){B(!1),R(e.toString())})))};return Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(M.a,{component:C.b,to:"/",startIcon:Object(P.jsx)(ie.a,{}),children:"Back"}),Object(P.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(P.jsx)(Z.a,{title:"Register"}),Object(P.jsxs)(D.a,{children:[Object(P.jsx)(ae.a,{name:"name",label:"Name",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&V()},error:""!==x,helperText:x}),Object(P.jsx)(ae.a,{name:"email",label:"Email",autoFocus:!0,margin:"normal",value:l,onChange:function(e){return u(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&V()},error:""!==v,helperText:v}),Object(P.jsx)(ae.a,{name:"password",label:"Password",type:"password",margin:"normal",value:b,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&V()},error:""!==N,helperText:N}),Object(P.jsx)("br",{}),Object(P.jsx)(F.a,{variant:"caption",color:"error",children:_}),Object(P.jsxs)(F.a,{variant:"caption",children:["Already have an account? ",Object(P.jsx)(C.b,{to:"/login",children:"Login here"})]})]}),Object(P.jsx)(E.a,{children:Object(P.jsx)(M.a,{color:"secondary",variant:"contained",onClick:V,disabled:Q,endIcon:Q?Object(P.jsx)(U.a,{size:18}):Object(P.jsx)(re.a,{}),children:"Sign up"})})]})]})})),authed:!1},{name:"Create Module",link:"/create/module",component:be,authed:!0},{name:"Module",link:"/module/:id/:newFetch?",component:st,authed:!0},{name:"Update Module",link:"/update/module/:id",component:he,authed:!0},{name:"Modules",link:"/modules/:newFetch?",component:lt,authed:!0},{name:"Create Lesson",link:"/create/lesson",component:jt,authed:!0},{name:"Lesson",link:"/lesson/:id/:newFetch?",component:dt,authed:!0},{name:"Lessons",link:"/lessons/:newFetch?",component:bt,authed:!0},{name:"Create Question",link:"/create/question/:id",component:An,authed:!0},{name:"Question",link:"/question/:id",component:Nn,authed:!0},{name:"Update Question",link:"/update/question/:lessonId/:id",component:In,authed:!0},{name:"Questions",link:"/questions/:newFetch?",component:qn,authed:!0}],Fn=function(){var e=I.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=Object(N.f)();return Object(A.useEffect)((function(){var e=function(e){return a(e)},t=Q.isAuthenticated();e(!!t),i.listen((function(){var t=Q.isAuthenticated();e(!!t)}))}),[i]),Object(P.jsxs)(I.a.Fragment,{children:[Object(P.jsx)(X,{isAuthed:n,setIsAuthed:a,history:i}),Object(P.jsx)(q.a,{container:!0,justify:"center",style:{marginTop:"20px",marginBottom:"20px"},children:Object(P.jsx)(q.a,{item:!0,xs:11,children:Object(P.jsxs)(N.c,{children:[Object(P.jsx)(N.a,{exact:!0,path:"/",component:B}),Dn.map((function(e,t){var a=e.link,r=e.component;return e.authed&&!n?Object(P.jsx)(N.a,{render:function(){return Object(P.jsx)(ne,{message:"You need to be logged in to view this page",action:function(){return i.push("/login")},actionLabel:"Login"})}},t):Object(P.jsx)(N.a,{path:a,component:r},t)})),Object(P.jsx)(N.a,{render:function(){return Object(P.jsx)(ne,{message:"The page you are looking for does not exist"})}})]})})})]})},En=n(139),Mn=n(275),$n=Object(En.a)({palette:{primary:{main:"#ff9100"},secondary:{main:"#42a5f5"}},typography:{fontFamily:["quicksand","sans-serif"].join(","),h1:{fontWeight:800,fontSize:"3.052rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h2:{fontWeight:700,fontSize:"2.441rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h3:{fontWeight:700,fontSize:"1.953rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h4:{fontWeight:700,fontSize:"1.563rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h5:{fontWeight:700,fontSize:"1.25rem",color:"#4e4e4e"}},overrides:{MuiTextField:{root:{width:"100%",margin:"16px auto"}},MuiListItemText:{root:{display:"flex",flexDirection:"column-reverse"}}}}),Qn=$n=Object(Mn.a)($n),Pn=function(){return Object(P.jsx)(C.a,{children:Object(P.jsx)(S.a,{theme:Qn,children:Object(P.jsx)(Fn,{})})})},Bn=new ce.ApolloClient({uri:Y.server_url+"/graphql",credentials:"include",cache:new ce.InMemoryCache});i.a.render(Object(P.jsx)(ce.ApolloProvider,{client:Bn,children:Object(P.jsx)(Pn,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):c(t,e)}))}}()}},[[170,1,2]]]);
//# sourceMappingURL=main.f8ce17cc.chunk.js.map