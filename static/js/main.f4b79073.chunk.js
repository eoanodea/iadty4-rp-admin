(this["webpackJsonpmusic-theory-admin"]=this["webpackJsonpmusic-theory-admin"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(26),c=n.n(r),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l,u,j,d,b,O,p,h,x,m,g,f,v,y,w,C,S,k=n(13),A=n(266),I=n(8),q=n(30),N=n(265),L=n(274),T=n(211),F=n(215),D=n(51),M=n(216),$=n(217),Q=n(7),E={setUserDetails:function(e,t){var n={token:e.token,user:{email:e.user.email,id:e.user.id}};sessionStorage.setItem("jwt",JSON.stringify(n)),t(!0)},unsetUserDetails:function(e){sessionStorage.removeItem("jwt"),e(!0)},isAuthenticated:function(){if("undefined"==typeof window)return!1;if(null!==sessionStorage.getItem("jwt")){var e=JSON.parse(sessionStorage.getItem("jwt"));return!(!e||!e.user)&&e}return!1}},B=n(1),H=Object(Q.a)((function(){return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"}})}))((function(e){var t=e.classes;return Object(B.jsxs)(T.a,{className:t.root,children:[Object(B.jsxs)(F.a,{children:[Object(B.jsx)(D.a,{variant:"h1",children:"Welcome"}),Object(B.jsx)("br",{}),Object(B.jsx)(D.a,{variant:"body1",children:"Music Theory Admin Dashboard"})]}),Object(B.jsx)(M.a,{className:t.actions,children:E.isAuthenticated()?Object(B.jsx)($.a,{variant:"contained",color:"primary",component:k.b,"aria-label":"Button",to:"/modules",children:"Modules"}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{variant:"contained",color:"primary",component:k.b,"aria-label":"Button",to:"/login",children:"Login"}),Object(B.jsx)($.a,{variant:"contained",color:"primary",component:k.b,"aria-label":"Button",to:"/register",children:"Register"})]})})]})})),P=n(218),z=n(219),W=n(172),U=n(140),R=n(225),K=n(226),_=n(273),V=n(220),J=n(221),Y={env:"production",server_url:"https://iadt-researchproject-server.herokuapp.com"},G=n(110),X=function(e){var t=e.history,n=e.isAuthed,r=e.setIsAuthed;G.a.initialize(Y.ga_id);var c=i.a.useState(""),o=Object(I.a)(c,2),s=o[0],l=o[1];Object(a.useEffect)((function(){t.listen((function(){G.a.pageview(window.location.pathname+window.location.search)}))}),[t]);var u=i.a.useState(!1),j=Object(I.a)(u,2),d=j[0],b=j[1],O=i.a.useState(null),p=Object(I.a)(O,2),h=p[0],x=p[1],m=Boolean(h),g=function(){x(null)};return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(P.a,{position:"sticky",children:Object(B.jsxs)(z.a,{style:{justifyContent:"space-between"},children:[Object(B.jsx)(W.a,{"aria-label":"Home",component:k.b,to:"/",children:Object(B.jsx)(V.a,{})}),n&&Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(W.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){x(e.currentTarget)},color:"inherit",children:Object(B.jsx)(J.a,{})}),Object(B.jsx)(U.a,{id:"menu-appbar",anchorEl:h,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:g,children:Object(B.jsxs)(R.a,{disabled:d,onClick:function(){E.isAuthenticated()?(b(!0),E.unsetUserDetails((function(e){if(e)return r(!1),b(!1),g(),l("Logged out successfully"),t.push("/");l("The system encountered an error, please try again later")}))):(r(!1),l("The system encountered an error, please try again later"))},children:["Logout ",d&&Object(B.jsx)(K.a,{size:18})]})})]})]})}),Object(B.jsx)(_.a,{open:""!==s,autoHideDuration:6e3,onClose:function(){return l("")},message:s})]})},Z=n(228),ee=n(227),te=n(229),ne=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4),textAlign:"center",maxWidth:"800px",margin:"0 auto"},icon:{fontSize:"3em"},header:{display:"flex",flexDirection:"column-reverse",justifyContent:"center"},iconContainer:{textAlign:"center"}})}))((function(e){var t=e.message,n=void 0===t?void 0:t,a=e.classes,i=e.action,r=void 0===i?void 0:i,c=e.actionLabel,o=void 0===c?"Try Again":c;return Object(B.jsxs)(T.a,{elevation:3,className:a.wrapper,children:[Object(B.jsx)("div",{className:a.iconContainer,children:Object(B.jsx)(ee.a,{color:"error",className:a.icon})}),Object(B.jsx)(Z.a,{title:n||"There was a problem",className:a.header}),r?Object(B.jsx)($.a,{className:a.iconContainer,variant:"contained",color:"secondary",endIcon:Object(B.jsx)(te.a,{}),onClick:r,children:o}):Object(B.jsx)($.a,{component:k.b,to:"/",color:"primary",variant:"contained",children:"Home"})]})})),ae=n(267),ie=n(230),re=n(234),ce=n(11),oe=n(21),se=Object(ce.gql)(l||(l=Object(oe.a)(["\n  query getModules {\n    getModules {\n      id\n      title\n      level\n      createdAt\n      lessons {\n        id\n      }\n    }\n  }\n"]))),le=Object(ce.gql)(u||(u=Object(oe.a)(["\n  query getModule($id: String!) {\n    getModule(id: $id) {\n      id\n      title\n      level\n      type\n      createdAt\n      lessons {\n        id\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]))),ue=Object(ce.gql)(j||(j=Object(oe.a)(["\n  mutation addModule($input: ModuleValidator!) {\n    addModule(input: $input) {\n      id\n    }\n  }\n"]))),je=Object(ce.gql)(d||(d=Object(oe.a)(["\n  mutation updateModule($id: String!, $input: ModuleValidator!) {\n    updateModule(id: $id, input: $input) {\n      id\n      title\n      level\n      type\n    }\n  }\n"]))),de=Object(ce.gql)(b||(b=Object(oe.a)(["\n  mutation deleteModule($id: String!) {\n    deleteModule(id: $id)\n  }\n"]))),be=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,r=Object(a.useState)(""),c=Object(I.a)(r,2),o=c[0],s=c[1],l=Object(a.useState)(0),u=Object(I.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)("THEORY"),O=Object(I.a)(b,2),p=O[0],h=O[1],x=Object(a.useState)(""),m=Object(I.a)(x,2),g=m[0],f=m[1],v=Object(a.useState)(""),y=Object(I.a)(v,2),w=y[0],C=y[1],S=Object(ce.useMutation)(ue),A=Object(I.a)(S,2),q=A[0],N=A[1].loading,L=function(){(function(){var e=!1;return o.length<3?f("Title must be at least 3 characters"):(e=!0,f("")),e})()&&(C(""),q({variables:{input:{title:o,level:j,type:p}}}).then((function(e){t.push("/modules/true")})).catch((function(e){C(e.toString())})))};return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/",startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(B.jsx)(Z.a,{title:"Create Module"}),Object(B.jsxs)(F.a,{children:[Object(B.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&L()},error:""!==g,helperText:g}),Object(B.jsx)(ae.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:j,onChange:function(e){return d(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&L()}}),Object(B.jsx)(ae.a,{title:"type",label:"Lesson Type",margin:"normal",value:p,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&L()}}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:w})]}),Object(B.jsx)(M.a,{children:Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:L,disabled:N,endIcon:N?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),children:"Save"})})]})]})})),Oe=Object(Q.a)((function(){return Object(L.a)({progressWrapper:{minHeight:"-webkit-fill-available",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(B.jsx)("div",{className:t.progressWrapper,children:Object(B.jsx)(K.a,{})})})),pe=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,r=e.match,c=Object(a.useState)(""),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(0),j=Object(I.a)(u,2),d=j[0],b=j[1],O=Object(a.useState)(""),p=Object(I.a)(O,2),h=p[0],x=p[1],m=Object(a.useState)(""),g=Object(I.a)(m,2),f=g[0],v=g[1],y=Object(a.useState)(""),w=Object(I.a)(y,2),C=w[0],S=w[1],A=r.params.id,q=Object(ce.useQuery)(le,{variables:{id:A}}),N=q.loading,L=q.error,Q=q.data,E=Object(ce.useMutation)(je),H=Object(I.a)(E,2),P=H[0],z=H[1].loading,W=function(){(function(){var e=!1;return s.length<3?v("Title must be at least 3 characters"):(e=!0,v("")),e})()&&(S(""),P({variables:{id:A,input:{title:s,level:d,type:h}}}).then((function(e){t.push("/module/".concat(e.data.updateModule.id))})).catch((function(e){console.log("error",e),S(e.toString())})))};return Object(a.useEffect)((function(){Q&&Q.getModule&&(l(Q.getModule.title),b(Q.getModule.level),x(Q.getModule.type))}),[Q]),N?Object(B.jsx)(Oe,{}):L?Object(B.jsx)(ne,{message:L.message}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/",startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(B.jsx)(Z.a,{title:"Edit Module"}),Object(B.jsxs)(F.a,{children:[Object(B.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:s,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&W()},error:""!==f,helperText:f}),Object(B.jsx)(ae.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:d,onChange:function(e){return b(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&W()}}),Object(B.jsx)(ae.a,{title:"type",label:"Lesson Type",margin:"normal",value:h,onChange:function(e){return x(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&W()}}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:C})]}),Object(B.jsx)(M.a,{children:Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:W,disabled:N||z,endIcon:N||z?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),children:"Save"})})]})]})})),he=n(245),xe=n(247),me=n(249),ge=n(224),fe=n(251),ve=n(246),ye=n(248),we=n(242),Ce=n(252),Se=n(235),ke=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object(B.jsx)(Se.a,{component:k.b,to:n,children:a}):Object(B.jsx)("div",{children:a})},Ae=n(277),Ie=n(237),qe=n(238),Ne=n(239),Le=n(240),Te=n(241),Fe=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.module,r=e.handleClose,c=i.a.useState(""),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(ce.useMutation)(de),j=Object(I.a)(u,2),d=j[0],b=j[1].loading;return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsxs)(Ae.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"edit-module-dialog",children:[Object(B.jsx)(Ie.a,{children:"Confirmation"}),Object(B.jsx)(qe.a,{children:Object(B.jsx)(Ne.a,{children:"Are you sure you want to delete this module?"})}),Object(B.jsxs)(Le.a,{children:[Object(B.jsx)($.a,{color:"primary",variant:"contained",onClick:function(){return r(!1)},endIcon:Object(B.jsx)(Te.a,{}),children:"Cancel"}),Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;d({variables:{id:e}}).then((function(e){if(!0===e.data.deleteModule)return t.push("/modules/true");l("Could not delete Module")})).catch((function(e){l(e.toString())}))},disabled:b,endIcon:b?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(we.a,{}),children:"Confirm"})]})]}),Object(B.jsx)(_.a,{open:""!==s,autoHideDuration:6e3,onClose:function(){return l("")},message:s})]})})),De=n(173),Me=n(253),$e=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object(B.jsx)(Se.a,{component:k.b,to:n,children:a}):Object(B.jsx)("div",{children:a})},Qe=Object(ce.gql)(O||(O=Object(oe.a)(["\n  query getLessons {\n    getLessons {\n      id\n      module {\n        id\n        title\n      }\n      questions {\n        id\n        text {\n          text\n        }\n      }\n    }\n  }\n"]))),Ee=Object(ce.gql)(p||(p=Object(oe.a)(["\n  query getLesson($id: String!) {\n    getLesson(id: $id) {\n      id\n      createdAt\n      updatedAt\n      module {\n        id\n      }\n      questions {\n        id\n        text {\n          id\n          text\n        }\n        type\n        answer\n        answerArr\n      }\n    }\n  }\n"]))),Be=Object(ce.gql)(h||(h=Object(oe.a)(["\n  mutation addLesson($module: String!, $input: LessonValidator!) {\n    addLesson(module: $module, input: $input) {\n      id\n    }\n  }\n"]))),He=(Object(ce.gql)(x||(x=Object(oe.a)(["\n  mutation updateLesson($id: String!, $input: LessonValidator!) {\n    updateLesson(id: $id, input: $input) {\n      id\n      title\n      level\n      type\n    }\n  }\n"]))),Object(ce.gql)(m||(m=Object(oe.a)(["\n  mutation deleteLesson($id: String!) {\n    deleteLesson(id: $id)\n  }\n"])))),Pe=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.lesson,r=e.handleClose,c=i.a.useState(""),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(ce.useMutation)(He),j=Object(I.a)(u,2),d=j[0],b=j[1].loading;return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsxs)(Ae.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"edit-lesson-dialog",children:[Object(B.jsx)(Ie.a,{children:"Confirmation"}),Object(B.jsx)(qe.a,{children:Object(B.jsx)(Ne.a,{children:"Are you sure you want to delete this lesson?"})}),Object(B.jsxs)(Le.a,{children:[Object(B.jsx)($.a,{color:"primary",variant:"contained",onClick:function(){return r(!1)},endIcon:Object(B.jsx)(Te.a,{}),children:"Cancel"}),Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;d({variables:{id:e}}).then((function(e){if(!0===e.data.deleteLesson)return t.push("/module/".concat(a.module.id,"/true"));l("Could not delete Lesson")})).catch((function(e){l(e.toString())}))},disabled:b,endIcon:b?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(we.a,{}),children:"Confirm"})]})]}),Object(B.jsx)(_.a,{open:""!==s,autoHideDuration:6e3,onClose:function(){return l("")},message:s})]})})),ze=n(250),We=function(e){var t=e.link,n=void 0===t?null:t,a=e.children;return n?Object(B.jsx)(Se.a,{component:k.b,to:n,children:a}):Object(B.jsx)("div",{children:a})},Ue=(Object(ce.gql)(g||(g=Object(oe.a)(["\n  query getQuestions {\n    getQuestions {\n      id\n      title\n      level\n      lessons {\n        id\n      }\n    }\n  }\n"]))),Object(ce.gql)(f||(f=Object(oe.a)(["\n  query getQuestionTypes {\n    getQuestionTypes\n  }\n"])))),Re=Object(ce.gql)(v||(v=Object(oe.a)(["\n  query getQuestion($id: String!) {\n    getQuestion(id: $id) {\n      id\n      image\n      type\n      createdAt\n      options\n      points\n      answer\n      answerArr\n      answerHint\n      text {\n        id\n        text\n        order\n        note {\n          id\n        }\n      }\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Ke=Object(ce.gql)(y||(y=Object(oe.a)(["\n  mutation addQuestion($lessonId: String!, $input: QuestionValidator!) {\n    addQuestion(lessonId: $lessonId, input: $input) {\n      id\n      lesson {\n        id\n      }\n    }\n  }\n"]))),_e=Object(ce.gql)(w||(w=Object(oe.a)(["\n  mutation updateQuestion($id: String!, $input: QuestionValidator!) {\n    updateQuestion(id: $id, input: $input) {\n      id\n      lesson {\n        id\n      }\n    }\n  }\n"]))),Ve=Object(ce.gql)(C||(C=Object(oe.a)(["\n  mutation deleteQuestion($id: String!) {\n    deleteQuestion(id: $id)\n  }\n"]))),Je=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({root:{padding:t(1),margin:"".concat(t(2),"px 0")},actions:{justifyContent:"flex-end"}})}))((function(e){var t=e.history,n=e.open,a=e.question,r=e.handleClose,c=i.a.useState(""),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(ce.useMutation)(Ve),j=Object(I.a)(u,2),d=j[0],b=j[1].loading;return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsxs)(Ae.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"edit-question-dialog",children:[Object(B.jsx)(Ie.a,{children:"Confirmation"}),Object(B.jsx)(qe.a,{children:Object(B.jsx)(Ne.a,{children:"Are you sure you want to delete this question?"})}),Object(B.jsxs)(Le.a,{children:[Object(B.jsx)($.a,{color:"primary",variant:"contained",onClick:function(){return r(!1)},endIcon:Object(B.jsx)(Te.a,{}),children:"Cancel"}),Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:function(){var e=a.id;d({variables:{id:e}}).then((function(e){if(!0===e.data.deleteQuestion)return t.push("/lesson/".concat(a.lesson.id,"/true"));l("Could not delete Question")})).catch((function(e){l(e.toString())}))},disabled:b,endIcon:b?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(we.a,{}),children:"Confirm"})]})]}),Object(B.jsx)(_.a,{open:""!==s,autoHideDuration:6e3,onClose:function(){return l("")},message:s})]})})),Ye=n(243),Ge=n(278),Xe=n(236),Ze=n(244),et=Object(Ye.a)((function(e){return Object(L.a)({preview:{height:200,minWidth:200,margin:"".concat(e.spacing(2),"px auto"),backgroundSize:"contain"},cardText:{textAlign:"center"}})})),tt=function(e){var t=e.photo,n=et(),r=i.a.useState(!0),c=Object(I.a)(r,2),o=c[0],s=c[1],l=i.a.useState(""),u=Object(I.a)(l,2),j=u[0],d=u[1];return Object(a.useEffect)((function(){t&&""===j?(d(t),s(!1)):s(!1)}),[j,t]),o?Object(B.jsx)(Oe,{}):j?Object(B.jsx)(Xe.a,{in:!0,children:Object(B.jsx)(Ze.a,{image:j,className:n.preview})}):Object(B.jsx)(ne,{message:"Could not preview image"})},nt=Object(Ye.a)((function(e){return Object(L.a)({previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",textAlign:"center",padding:e.spacing(2),margin:e.spacing(2),height:"55vh"},optionChip:{background:"#e0e0e06b",borderRadius:8,fontWeight:800,margin:e.spacing(1)},doneButton:{width:"90%"}})})),at=function(e){var t=e.question,n=nt();return Object(B.jsxs)(T.a,{className:n.previewContainer,children:[Object(B.jsx)(D.a,{variant:"h3",children:t.text.map((function(e){return e.note?Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)("span",{style:{color:"#ff9100",textDecoration:"underline"},children:e.text}),Object(B.jsx)("span",{children:" "})]},e.text):e.text+" "}))}),Object(B.jsx)(tt,{photo:t.image.includes("base64")?t.image:Y.server_url+"/images/"+t.image}),Object(B.jsx)("div",{children:t.options.map((function(e){return Object(B.jsx)(Ge.a,{label:e,className:n.optionChip},e)}))}),Object(B.jsx)($.a,{variant:"contained",disabled:!0,className:n.doneButton,onClick:function(){},children:"Done"})]})},it=Object(Q.a)((function(e){var t=e.palette,n=e.spacing;return Object(L.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=(e.classes,e.question),r=e.link,c=void 0===r?null:r,o=e.delay,s=void 0===o?0:o,l=e.lessonId,u=void 0===l?null:l,j=(e.disableHeight,i.a.useState(null)),d=Object(I.a)(j,2),b=d[0],O=d[1],p=i.a.useState(!1),h=Object(I.a)(p,2),x=h[0],m=h[1],g=Boolean(b);return t?Object(B.jsx)(he.a,{in:!0,style:{transitionDelay:"".concat(s,"ms")},children:Object(B.jsxs)(We,{link:c,children:[Object(B.jsx)(Z.a,{title:a.text.map((function(e){return e.text+" "})),subheader:"MULTIPLE_CHOICE"===a.type?"Answer: "+a.answerArr.map((function(e){return e})):"Answer: "+a.answer,action:t&&Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(W.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){O(e.currentTarget)},children:Object(B.jsx)(ve.a,{})}),Object(B.jsxs)(U.a,{id:"menu",anchorEl:b,open:g,onClose:function(){O(null)},children:[Object(B.jsxs)(R.a,{component:k.b,to:"/update/question/".concat(u||a.lesson.id,"/").concat(a.id),children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(ye.a,{})}),Object(B.jsx)(me.a,{primary:"Edit"})]}),Object(B.jsxs)(R.a,{onClick:function(){return m(!0)},children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(we.a,{})}),Object(B.jsx)(me.a,{primary:"Delete"})]})]})]})}),Object(B.jsxs)(F.a,{children:[Object(B.jsx)(at,{question:a}),Object(B.jsx)(Je,{open:x,question:a,handleClose:m,history:n})]})]})}):Object(B.jsx)(i.a.Fragment,{children:Object(B.jsxs)(De.a,{button:!0,component:k.b,to:"/question/".concat(a.id),children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(ze.a,{})}),Object(B.jsx)(me.a,{primary:a.text.map((function(e){return e.text+" "})),secondary:"MULTIPLE_CHOICE"===a.type?"Answer: "+a.answerArr.map((function(e){return e})):"Answer: "+a.answer})]})})})),rt=Object(Q.a)((function(e){var t=e.palette,n=e.spacing;return Object(L.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{height:200},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.classes,r=e.lesson,c=e.link,o=void 0===c?null:c,s=e.delay,l=void 0===s?0:s,u=e.disableHeight,j=void 0===u||u,d=i.a.useState(null),b=Object(I.a)(d,2),O=b[0],p=b[1],h=i.a.useState(!1),x=Object(I.a)(h,2),m=x[0],g=x[1],f=Boolean(O);return t?Object(B.jsx)(he.a,{in:!0,style:{transitionDelay:"".concat(l,"ms")},children:Object(B.jsx)(T.a,{className:j?a.fixedHeightCard:a.card,children:Object(B.jsxs)($e,{link:o,children:[Object(B.jsx)(Z.a,{title:"Lesson",subheader:new Date(r.createdAt).toDateString(),action:t&&Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(W.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:Object(B.jsx)(ve.a,{})}),Object(B.jsx)(U.a,{id:"menu",anchorEl:O,open:f,onClose:function(){p(null)},children:Object(B.jsxs)(R.a,{onClick:function(){return g(!0)},children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(we.a,{})}),Object(B.jsx)(me.a,{primary:"Delete"})]})})]})}),Object(B.jsx)(F.a,{children:t?Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(ge.a,{children:r.questions.map((function(e){return Object(B.jsx)(it,{lessonId:r.id,question:e,displayActions:!1},e.id)}))}),Object(B.jsx)(Pe,{open:m,lesson:r,handleClose:g,history:n}),Object(B.jsx)(fe.a,{className:a.fab,component:k.b,"aria-label":"Add Lesson",color:"secondary",to:"/create/question/".concat(r.id),children:Object(B.jsx)(Ce.a,{})})]}):Object(B.jsxs)(D.a,{variant:"body2",children:[r.lessons.length," Lesson",r.lessons.length>1?"s":""]})})]})})}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsxs)(De.a,{button:!0,component:k.b,to:"/lesson/".concat(r.id),children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(Me.a,{})}),Object(B.jsx)(me.a,{primary:"Lesson",secondary:"Last Updated: ".concat(new Date(r.updatedAt).toDateString())})]}),Object(B.jsx)(Pe,{open:m,lesson:r,handleClose:g,history:n})]})})),ct=Object(Q.a)((function(e){var t=e.palette,n=e.spacing;return Object(L.a)({card:{margin:"".concat(n(4),"px auto")},fixedHeightCard:{margin:"".concat(n(4),"px auto")},avatar:{background:t.secondary.main},chipContainer:{"& > *":{margin:n(.5)}},divider:{margin:n(2)},fab:{position:"fixed",bottom:n(2),right:n(2)}})}))((function(e){var t=e.displayActions,n=e.history,a=e.classes,r=e.module,c=e.link,o=void 0===c?null:c,s=e.delay,l=void 0===s?0:s,u=e.disableHeight,j=void 0===u||u,d=e.refetch,b=void 0===d?function(){}:d,O=i.a.useState(null),p=Object(I.a)(O,2),h=p[0],x=p[1],m=i.a.useState(!1),g=Object(I.a)(m,2),f=g[0],v=g[1],y=i.a.useState(""),w=Object(I.a)(y,2),C=w[0],S=w[1],A=Object(ce.useMutation)(Be),q=Object(I.a)(A,2),N=q[0],L=q[1].loading,M=Boolean(h);return Object(B.jsx)(he.a,{in:!0,style:{transitionDelay:"".concat(l,"ms")},children:Object(B.jsx)(T.a,{className:j?a.fixedHeightCard:a.card,children:Object(B.jsxs)(ke,{link:o,children:[Object(B.jsx)(Z.a,{title:r.title,subheader:new Date(r.createdAt).toDateString(),action:t&&Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(W.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){x(e.currentTarget)},children:Object(B.jsx)(ve.a,{})}),Object(B.jsxs)(U.a,{id:"menu",anchorEl:h,open:M,onClose:function(){x(null)},children:[Object(B.jsxs)(R.a,{component:k.b,to:"/update/module/".concat(r.id),children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(ye.a,{})}),Object(B.jsx)(me.a,{primary:"Edit"})]}),Object(B.jsxs)(R.a,{onClick:function(){return v(!0)},children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(we.a,{})}),Object(B.jsx)(me.a,{primary:"Delete"})]})]})]})}),Object(B.jsx)(F.a,{children:t?Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(ge.a,{children:r.lessons.map((function(e){return Object(B.jsx)(rt,{lesson:e,link:"/lesson/".concat(e.id),displayActions:!1},e.id)}))}),Object(B.jsx)(Fe,{open:f,module:r,handleClose:v,history:n}),Object(B.jsx)(fe.a,{className:a.fab,disabled:L,"aria-label":"Add Lesson",color:"secondary",onClick:function(){N({variables:{module:r.id,input:{level:r.level}}}).then((function(){b(),S("Lesson Added")})).catch((function(e){console.log("error!",e),S("Error adding Lesson: "+e.toString())}))},children:L?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(Ce.a,{})}),Object(B.jsx)(_.a,{open:""!==C,autoHideDuration:6e3,onClose:function(){return S("")},message:C})]}):Object(B.jsxs)(D.a,{variant:"body2",children:[r.lessons.length," Lesson",r.lessons.length>1?"s":""]})})]})})})})),ot=Object(q.g)((function(e){var t=e.history,n=e.match.params,a=n.id,r=n.newFetch,c=Object(ce.useQuery)(le,{variables:{id:a}}),o=c.loading,s=c.error,l=c.data,u=c.refetch;return o?Object(B.jsx)(Oe,{}):s||!l.getModule?Object(B.jsx)(ne,{message:s?s.message:"Could not load Module"}):(r&&(u(),t.push("/module/".concat(l.getModule.id))),Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/modules",startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsx)("div",{style:{position:"relative"},children:Object(B.jsx)(ct,{module:l.getModule,history:t,displayActions:!0,disableHeight:!1,refetch:u})})]}))})),st=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,r=Object(ce.useQuery)(se),c=r.loading,o=r.error,s=r.data,l=r.refetch;return n.params.newFetch&&(l(),a.push("/modules")),c?Object(B.jsx)(Oe,{}):o?Object(B.jsx)(ne,{message:o.message}):Object(B.jsxs)(i.a.Fragment,{children:[s.getModules.length<1?Object(B.jsx)(ne,{message:"No Modules Found"}):s.getModules.map((function(e){return Object(B.jsx)(ct,{displayActions:!1,module:e,link:"/module/".concat(e.id)},e.id)})),Object(B.jsx)(fe.a,{className:t.fab,component:k.b,"aria-label":"Add Module",color:"secondary",to:"/create/module",children:Object(B.jsx)(Ce.a,{})})]})})),lt=n(43),ut=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,r=Object(a.useState)(""),c=Object(I.a)(r,2),o=c[0],s=c[1],l=Object(a.useState)(0),u=Object(I.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(""),O=Object(I.a)(b,2),p=O[0],h=O[1],x=Object(a.useState)(""),m=Object(I.a)(x,2),g=m[0],f=m[1],v=Object(a.useState)(""),y=Object(I.a)(v,2),w=y[0],C=y[1],A=Object(ce.useMutation)(Be,{update:function(e,t){var n=t.data.addLesson;e.modify({fields:{lessons:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.writeFragment({data:n,fragment:Object(ce.gql)(S||(S=Object(oe.a)(["\n                fragment NewLesson on Lesson {\n                  __typename\n                  id\n                  title\n                  level\n                  type\n                }\n              "])))});return[].concat(Object(lt.a)(t),[a])}}})}}),q=Object(I.a)(A,2),N=q[0],L=q[1].loading,Q=function(){(function(){var e=!1;return o.length<3?f("Title must be at least 3 characters"):(e=!0,f("")),e})()&&(C(""),N({variables:{input:{title:o,level:j,type:p}}}).then((function(e){t.push("/lessons/true")})).catch((function(e){C(e.toString())})))};return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/",startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(B.jsx)(Z.a,{title:"Create Lesson"}),Object(B.jsxs)(F.a,{children:[Object(B.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&Q()},error:""!==g,helperText:g}),Object(B.jsx)(ae.a,{title:"level",label:"Level",margin:"normal",type:"number",InputProps:{inputProps:{min:0,max:12}},value:j,onChange:function(e){return d(parseInt(e.target.value))},onKeyDown:function(e){return"Enter"===e.key&&Q()}}),Object(B.jsx)(ae.a,{title:"type",label:"Lesson Type",margin:"normal",value:p,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&Q()}}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:w})]}),Object(B.jsx)(M.a,{children:Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:Q,disabled:L,endIcon:L?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),children:"Save"})})]})]})})),jt=Object(q.g)((function(e){var t=e.history,n=e.match,a=n.params.id,r=Object(ce.useQuery)(Ee,{variables:{id:a}}),c=r.loading,o=r.error,s=r.data,l=r.refetch;return n.params.newFetch&&(l(),t.push("/lesson/".concat(a))),c?Object(B.jsx)(Oe,{}):o||!s.getLesson?Object(B.jsx)(ne,{message:o?o.message:"Could not load Lesson"}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/module/".concat(s.getLesson.module.id),startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsx)("div",{style:{position:"relative"},children:Object(B.jsx)(rt,{lesson:s.getLesson,history:t,displayActions:!0,disableHeight:!1})})]})})),dt=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,r=Object(ce.useQuery)(Qe),c=r.loading,o=r.error,s=r.data,l=r.refetch;return n.params.newFetch&&(l(),a.push("/lessons")),c?Object(B.jsx)(Oe,{}):o?Object(B.jsx)(ne,{message:o.message}):Object(B.jsxs)(i.a.Fragment,{children:[s.getLessons.length<1?Object(B.jsx)(ne,{message:"No Lessons Found"}):s.getLessons.map((function(e){return Object(B.jsx)(rt,{displayActions:!1,lesson:e,link:"/lesson/".concat(e.id)},e.id)})),Object(B.jsx)(fe.a,{className:t.fab,component:k.b,"aria-label":"Add Lesson",color:"secondary",to:"/create/lesson",children:Object(B.jsx)(Ce.a,{})})]})})),bt=n(25),Ot=n(281),pt=n(264),ht=n(271),xt=n(222),mt=n(257),gt=n(141),ft=n(276),vt=n(258),yt=n(233),wt=n(255),Ct=n(256),St=n(254),kt=n(138);function At(e){var t=e.items,n=e.swapDistance,i=e.onPositionUpdate,r=e.onPositionChange,c=Object(a.useState)(-1),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(a.useCallback)((function(e,a){var r=function(e,t,n,a){var i=e;if(t>0){if(e===n-1)return e;t>a&&(i=e+1)}else if(t<0){if(0===e)return e;t<-a&&(i=e-1)}return Math.min(Math.max(i,0),n)}(e,a,t.length,n);r!==e&&i(e,r)}),[t.length,n,i]),j=Object(a.useCallback)((function(e){r&&s!==e&&r(s,e),l(-1)}),[s,r]);return{handleChange:u,handleDragStart:l,handleDragEnd:j}}var It,qt,Nt,Lt,Tt,Ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case"dragging":return t+3;case"animating":return t+2;default:return t+1}};function Dt(e){var t=e.index,n=e.height,i=e.item,r=e.itemProps,c=e.listItem,o=function(e,t){var n=t.handleChange,i=t.handleDragStart,r=t.handleDragEnd,c=Object(a.useState)("idle"),o=Object(I.a)(c,2),s=o[0],l=o[1];return[s,{onDragStart:function(){l("dragging"),i(e)},onDragEnd:function(){l("animating"),r(e)},onAnimationComplete:function(){"animating"===s&&l("idle")},onViewportBoxUpdate:function(t,a){"dragging"===s&&n(e,a.y.translate)}}]}(t,r),s=Object(I.a)(o,2),l=s[0],u=s[1];return Object(B.jsx)("div",{style:{padding:0,height:n,zIndex:Ft(l)},children:Object(B.jsx)(kt.a.div,Object(bt.a)(Object(bt.a)({layout:!0,initial:!1,drag:"y",style:{height:n,borderRadius:5},whileHover:{scale:1.03,boxShadow:"0px 3px 3px rgba(0,0,0,0.15)"},whileTap:{scale:1.12,boxShadow:"0px 5px 5px rgba(0,0,0,0.1)"}},u),{},{children:c(i)}))})}function Mt(e){var t=e.items,n=e.setItems,r=e.listItem,c=Object(a.useCallback)((function(e,a){n(function(e,t,n){var a=Object(lt.a)(e);return a[n]=e[t],a[t]=e[n],a}(t,e,a))}),[t,n]),o=At({items:t,swapDistance:60,onPositionUpdate:c});return Object(B.jsx)(i.a.Fragment,{children:t.map((function(e,t){return Object(B.jsx)(Dt,{index:t,height:60,item:Object(bt.a)({i:t},e),listItem:r,itemProps:o},e.id)}))})}var $t=Object(ce.gql)(It||(It=Object(oe.a)(["\n  query getNotes {\n    getNotes {\n      id\n      title\n      markdown\n      sanitizedHtml\n    }\n  }\n"]))),Qt=(Object(ce.gql)(qt||(qt=Object(oe.a)(["\n  query getNote($id: String!) {\n    getNote(id: $id) {\n      id\n      title\n      markdown\n      sanitizedHtml\n    }\n  }\n"]))),Object(ce.gql)(Nt||(Nt=Object(oe.a)(["\n  mutation addNote($questionText: String!, $input: NoteValidator!) {\n    addNote(questionText: $questionText, input: $input) {\n      id\n    }\n  }\n"])))),Et=(Object(ce.gql)(Lt||(Lt=Object(oe.a)(["\n  mutation updateNote($id: String!, $input: NoteValidator!) {\n    updateNote(id: $id, input: $input) {\n      id\n    }\n  }\n"]))),Object(ce.gql)(Tt||(Tt=Object(oe.a)(["\n  mutation deleteNote($id: String!) {\n    deleteNote(id: $id)\n  }\n"]))),function(e){var t=e.newNote,n=Object(a.useState)(""),i=Object(I.a)(n,2),r=i[0],c=i[1],o=Object(a.useState)(""),s=Object(I.a)(o,2),l=s[0],u=s[1],j=Object(a.useState)(""),d=Object(I.a)(j,2),b=d[0],O=d[1],p=Object(a.useState)(""),h=Object(I.a)(p,2),x=h[0],m=h[1],g=Object(a.useState)(!1),f=Object(I.a)(g,2),v=f[0],y=f[1],w=Object(ce.useMutation)(Qt),C=Object(I.a)(w,1)[0],S=Object(a.useState)(""),k=Object(I.a)(S,2),A=k[0],q=k[1];return Object(B.jsxs)("div",{children:[Object(B.jsx)(ae.a,{title:"title",label:"Title",autoFocus:!0,margin:"normal",value:r,onChange:function(e){return c(e.target.value)},error:""!==l,helperText:l}),Object(B.jsx)(ae.a,{"aria-label":"Note content",rows:8,label:"Add your note content...",placeholder:"Add your note content...",multiline:!0,value:b,onChange:function(e){return O(e.target.value)},error:""!==x,helperText:x}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:A}),Object(B.jsx)($.a,{disabled:v,endIcon:v?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),variant:"contained",color:"primary",onClick:function(){(r.length<3?(u("Title must be at least 3 characters"),0):(u(""),b.length<5?(m("Note must be at least 5 characters"),0):(m(""),1)))&&(y(!0),q(""),C({variables:{questionText:"",input:{title:r,markdown:b}}}).then((function(e){t(r,e.data.addNote.id)})).catch((function(e){y(!1),q(e.toString())})))},children:"Save"})]})}),Bt=Object(Ye.a)((function(){return Object(L.a)({iconButton:{padding:10}})})),Ht=function(e){var t=e.i,n=e.onSelect,r=e.hasNote,c=void 0!==r&&r,o=Bt(),s=Object(ce.useQuery)($t),l=s.loading,u=s.error,j=s.data,d=s.refetch,b=Object(a.useState)(!1),O=Object(I.a)(b,2),p=O[0],h=O[1],x=Object(a.useState)(""),m=Object(I.a)(x,2),g=m[0],f=m[1],v=Object(a.useState)(!1),y=Object(I.a)(v,2),w=y[0],C=y[1],S=function(e){n(t,e),C(!1)},k=j&&j.getNotes?j.getNotes.filter((function(e){return""===g||e.title.toLowerCase().includes(g.toLowerCase())})):[];return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(W.a,{onClick:function(){return C(!0)},color:c?"primary":"default",className:o.iconButton,"aria-label":"Add a link to text",children:Object(B.jsx)(St.a,{})}),Object(B.jsxs)(Ae.a,{open:w,onClose:function(){return C(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(B.jsx)(Ie.a,{id:"alert-dialog-title",children:"Attach a note to this text"}),Object(B.jsxs)(qe.a,{children:[Object(B.jsx)(Ne.a,{id:"alert-dialog-description",children:"Attaching a note allows the user to select this piece of text, and view more details about it"}),p?Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{startIcon:Object(B.jsx)(ie.a,{}),onClick:function(){return h(!1)},children:"Back"}),Object(B.jsx)(Et,{newNote:function(e,t){d(),f(e),h(!1),S(t)}})]}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(ae.a,{title:"Search notes",label:"Search existing notes",autoFocus:!0,margin:"normal",value:g,onChange:function(e){return f(e.target.value)}}),Object(B.jsx)(ge.a,{children:u?Object(B.jsx)(ne,{message:u.message}):l?Object(B.jsx)(Oe,{}):k.length>0?k.map((function(e){return Object(B.jsx)(De.a,{button:!0,onClick:function(){return S(e.id)},children:Object(B.jsx)(me.a,{children:e.title})},e.id)})):Object(B.jsxs)("div",{children:[Object(B.jsx)(D.a,{children:"Could not find any notes"}),Object(B.jsx)($.a,{color:"primary",onClick:function(){return h(!0)},children:"Create one"})]})})]})]})]})]})},Pt=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)},inputContainer:{padding:"2px 4px",display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"80%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},listItem:{cursor:"move"}})})),zt=function(){var e=Pt(),t=Sn(),n=Object(I.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(""),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(""),j=Object(I.a)(u,2),d=j[0],b=j[1],O=Object(a.useState)(-1),p=Object(I.a)(O,2),h=p[0],x=p[1],m=Object(a.useState)((function(){return[]})),g=Object(I.a)(m,2),f=g[0],v=g[1],y=Object(a.createRef)(),w=Object(a.useCallback)((function(){var e=i;return e.text=f.map((function(e,t){return{order:t,text:e.text,note:e.note}})),r(e)}),[f,i,r]);Object(a.useEffect)((function(){if(i.text.length>0&&0===f.length){var e=i.text.map((function(e,t){return{id:t,text:e.text}}));return v(e)}w()}),[i,f,w]);var C=function(e){if(e.preventDefault(),s.length<1)return b("Text must be at least one character");if(-1!==h){var t=f.findIndex((function(e){return e.id===h}));v((function(e){return e[t].text=s,Object(lt.a)(e)})),x(-1)}else{var n={id:f.length+1,text:s};v((function(e){return[].concat(Object(lt.a)(e),[n])}))}l(""),b("")},S=function(e,t){var n=f.findIndex((function(t){return t.id===e})),a=f;a[n].note=t,v(Object(lt.a)(a)),w()};return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"Add Question Text"}),Object(B.jsxs)(gt.a,{className:e.inputContainer,children:[Object(B.jsx)(ft.a,{className:e.input,placeholder:"Add a new text item",inputProps:{"aria-label":"Add item"},autoFocus:!0,inputRef:y,value:s,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&C(e)},error:""!==d}),Object(B.jsx)(xt.a,{in:-1!==h,children:Object(B.jsx)(W.a,{className:e.iconButton,"aria-label":"Cancel edit",onClick:function(){x(-1),l("")},children:Object(B.jsx)(Te.a,{})})}),Object(B.jsx)(W.a,{className:e.iconButton,"aria-label":-1!==h?"Edit":"Create",onClick:C,children:-1!==h?Object(B.jsx)(Ct.a,{}):Object(B.jsx)(Ce.a,{})}),Object(B.jsx)(vt.a,{className:e.divider,orientation:"vertical"}),Object(B.jsx)(W.a,{className:e.iconButton,"aria-label":"Add a link to text",children:Object(B.jsx)(St.a,{})})]}),Object(B.jsx)(yt.a,{error:!0,children:d}),Object(B.jsx)(ge.a,{children:Object(B.jsx)(Mt,{items:f,setItems:v,listItem:function(t){var n=t.id,a=t.text,i=t.note,r=void 0===i?"":i;return Object(B.jsxs)(De.a,{className:e.listItem,children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(wt.a,{})}),Object(B.jsx)(xt.a,{in:!0,children:Object(B.jsx)(me.a,{children:a})}),Object(B.jsx)(xe.a,{children:Object(B.jsx)(W.a,{onClick:function(){return function(e){var t=f.findIndex((function(t){return t.id===e}));x(e),l(f[t].text),y&&y.current&&y.current.focus()}(n)},children:Object(B.jsx)(Ct.a,{})})}),Object(B.jsx)(mt.a,{children:Object(B.jsx)(W.a,{"aria-label":"comments",onClick:function(){return function(e){var t=f.findIndex((function(t){return t.id===e})),n=f;n.splice(t,1),v(Object(lt.a)(n)),w()}(n)},children:Object(B.jsx)(we.a,{})})}),Object(B.jsx)(Ht,{i:n,hasNote:""!==r,onSelect:S}),Object(B.jsx)(xe.a,{})]})}})})]})},Wt=n(80),Ut=n.n(Wt),Rt=n(109),Kt=n(259),_t=n(260),Vt=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)},label:{display:"flex",flexDirection:"column",margin:"".concat(e.spacing(4),"px auto")},input:{display:"none"},uploadHelpText:{textAlign:"center"}})})),Jt=function(){var e=Vt(),t=Sn(),n=Object(I.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(I.a)(o,2),l=s[0],u=s[1],j=Object(a.useState)(""),d=Object(I.a)(j,2),b=d[0],O=d[1];Object(a.useEffect)((function(){if(""!==r.image)return u(!0);u(!1)}),[r,l]);var p=function(){var e=Object(Rt.a)(Ut.a.mark((function e(t){var n,a,i;return Ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return",O("Please upload an image"));case 2:if(!((n=t.target.files[0]).size>6145728)){e.next=5;break}return e.abrupt("return",O("Upload cannot be greater than 6 MegaBytes"));case 5:return O(""),e.prev=6,e.next=9,h(n);case 9:if("string"!==typeof(a=e.sent)){e.next=15;break}return(i=r).image=a,c(i),e.abrupt("return",u(!0));case 15:O("Could not upload image"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),O("Could not upload file: "+e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return new Promise(function(){var t=Object(Rt.a)(Ut.a.mark((function t(n,a){var i;return Ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new FileReader).onload=function(){return n(i.result)},i.onerror=function(e){return a(e)},i.readAsDataURL(e);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"Add an Image"}),l?Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(tt,{photo:r.image.includes("base64")?r.image:Y.server_url+"/images/"+r.image}),Object(B.jsx)("br",{}),Object(B.jsx)($.a,{variant:"contained",color:"secondary",onClick:function(){return function(){var e=r;e.image="",u(!1),c(e)}()},endIcon:Object(B.jsx)(Kt.a,{}),className:e.label,children:"Clear"})]}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)("input",{accept:".jpg, .png, .jpeg",className:e.input,id:"photo-upload",type:"file",name:"photo-upload",onChange:function(e){return p(e)}}),Object(B.jsx)(Xe.a,{in:!0,children:Object(B.jsxs)("label",{htmlFor:"photo-upload",className:e.label,children:[Object(B.jsx)($.a,{variant:"contained",color:"secondary",component:"span",endIcon:Object(B.jsx)(_t.a,{}),children:"Upload"}),Object(B.jsx)(yt.a,{error:""!==b,className:e.uploadHelpText,children:b||"Maximum Size: 6 MB"})]})})]})]})},Yt=n(231),Gt=n(232),Xt=n(279),Zt=n(261),en=n(270),tn=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),nn=function(){var e=tn(),t=Sn(),n=Object(I.a)(t,2),a=n[0],i=n[1],r=a.questionTypeOptions.length<1?["Multiple Choice","Text"]:a.questionTypeOptions,c=function(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")};return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"Select Question Type"}),Object(B.jsxs)(Yt.a,{component:"fieldset",children:[Object(B.jsx)(Gt.a,{component:"legend",children:"Question Type"}),Object(B.jsx)(Xt.a,{"aria-label":"question-type",name:"question-type",defaultValue:a.type,value:c(a.type.replace("_"," ").toLowerCase()),onChange:function(e){var t=a;t.type=c(e.target.value.replace("_"," ").toLowerCase()),i(Object(bt.a)({},t))},children:r.map((function(e){return Object(B.jsx)(Zt.a,{value:c(e.replace("_"," ").toLowerCase()),control:Object(B.jsx)(en.a,{}),label:e},e)}))})]})]})},an=n(272),rn=n(262),cn=n(263),on=n(268),sn=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),ln=function(){var e=sn(),t=Sn(),n=Object(I.a)(t,2),a=n[0],r=n[1],c=Object(B.jsx)(rn.a,{fontSize:"small"}),o=Object(B.jsx)(cn.a,{fontSize:"small"});return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"Select Question Answer"}),"MULTIPLE_CHOICE"===a.type?Object(B.jsx)(on.a,{id:"select-question-multi-choice-answer",multiple:!0,options:a.options,getOptionLabel:function(e){return e},style:{width:300},defaultValue:a.answerArr,disableCloseOnSelect:!0,onChange:function(e,t){return function(e){var t=a;t.answerArr=e,r(t)}(t||"")},renderOption:function(e,t){var n=t.selected;return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(an.a,{icon:c,checkedIcon:o,style:{marginRight:8},checked:n}),e]})},renderInput:function(e){return Object(B.jsx)(ae.a,Object(bt.a)(Object(bt.a)({},e),{},{label:"Select Question Answer",variant:"outlined"}))}}):Object(B.jsx)(on.a,{id:"select-question-text-answer",defaultValue:a.answer,options:a.options,getOptionLabel:function(e){return e},style:{width:300},onChange:function(e,t){return function(e){var t=a;t.answer=e,r(t)}(t||"")},renderInput:function(e){return Object(B.jsx)(ae.a,Object(bt.a)(Object(bt.a)({},e),{},{label:"Select Question Answer",variant:"outlined"}))}})]})},un=n(280),jn=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)}})})),dn=function(){var e=jn(),t=Sn(),n=Object(I.a)(t,2),a=n[0],i=n[1];return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"Enter Question Details"}),Object(B.jsx)(ae.a,{value:a.answerHint,onChange:function(e){return i(Object(bt.a)(Object(bt.a)({},a),{},{answerHint:e.target.value}))},helperText:"A hint to the user after they answer a question incorrect"}),Object(B.jsx)(D.a,{id:"points-slider",gutterBottom:!0,children:"Points"}),Object(B.jsx)(un.a,{defaultValue:25,onChange:function(e,t){return i(Object(bt.a)(Object(bt.a)({},a),{},{points:t}))},"aria-labelledby":"points-slider",valueLabelDisplay:"auto",step:10,marks:!0,min:10,max:100})]})},bn=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3)},inputContainer:{padding:"2px 4px",display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"80%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},listItem:{cursor:"move"}})})),On=function(){var e=bn(),t=Sn(),n=Object(I.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(""),o=Object(I.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(""),j=Object(I.a)(u,2),d=j[0],b=j[1],O=Object(a.useState)(-1),p=Object(I.a)(O,2),h=p[0],x=p[1],m=Object(a.useState)((function(){return[]})),g=Object(I.a)(m,2),f=g[0],v=g[1],y=Object(a.createRef)(),w=Object(a.useCallback)((function(){var e=i;e.options=f.map((function(e){return e.text})),r(e)}),[f,i,r]);Object(a.useEffect)((function(){if(i.options.length>0&&0===f.length){var e=i.options.map((function(e,t){return{id:t,text:e}}));return v(e)}f.length>0&&f.length!==i.options.length&&w()}),[i,f,w]);var C=function(e){if(e.preventDefault(),s.length<1)return b("Text must be at least one character");if(-1!==h){var t=f.findIndex((function(e){return e.id===h}));v((function(e){return e[t].text=s,Object(lt.a)(e)})),x(-1)}else{var n={id:f.length+1,text:s};v((function(e){return[].concat(Object(lt.a)(e),[n])}))}l(""),b("")};return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"Add Options"}),Object(B.jsxs)(gt.a,{className:e.inputContainer,children:[Object(B.jsx)(ft.a,{className:e.input,placeholder:"Add a new option",inputProps:{"aria-label":"Add option"},autoFocus:!0,inputRef:y,value:s,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&C(e)},error:""!==d}),Object(B.jsx)(xt.a,{in:-1!==h,children:Object(B.jsx)(W.a,{className:e.iconButton,"aria-label":"Cancel edit",onClick:function(){x(-1),l("")},children:Object(B.jsx)(Te.a,{})})}),Object(B.jsx)(W.a,{className:e.iconButton,"aria-label":-1!==h?"Edit":"Create",onClick:C,children:-1!==h?Object(B.jsx)(Ct.a,{}):Object(B.jsx)(Ce.a,{})})]}),Object(B.jsx)(yt.a,{error:!0,children:d}),Object(B.jsx)(ge.a,{children:Object(B.jsx)(Mt,{items:f,setItems:v,listItem:function(t){var n=t.id,a=t.text;return Object(B.jsxs)(De.a,{className:e.listItem,children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(wt.a,{})}),Object(B.jsx)(xt.a,{in:!0,children:Object(B.jsx)(me.a,{children:a})}),Object(B.jsx)(xe.a,{children:Object(B.jsx)(W.a,{onClick:function(){return function(e){var t=f.findIndex((function(t){return t.id===e}));x(e),l(f[t].text),y&&y.current&&y.current.focus()}(n)},children:Object(B.jsx)(Ct.a,{})})}),Object(B.jsx)(mt.a,{onClick:function(){return function(e){var t=f.findIndex((function(t){return t.id===e})),n=f;console.log("removing one",n[t]),n.splice(t,1),console.log("done",n[t]),v(Object(lt.a)(n))}(n)},children:Object(B.jsx)(W.a,{edge:"end","aria-label":"comments",children:Object(B.jsx)(we.a,{})})})]})}})})]})},pn=Object(Ye.a)((function(e){return Object(L.a)({root:{padding:"2px 4px",margin:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"}})})),hn=function(e){var t=e.handleReset,n=e.history,i=pn(),r=Sn(),c=Object(I.a)(r,1)[0],o=Object(a.useState)(""),s=Object(I.a)(o,2),l=s[0],u=s[1],j=Object(a.useState)(!1),d=Object(I.a)(j,2),b=d[0],O=d[1],p=Object(ce.useMutation)(Ke),h=Object(I.a)(p,1)[0],x=Object(ce.useMutation)(_e),m=Object(I.a)(x,1)[0];return Object(B.jsxs)("div",{className:i.root,children:[Object(B.jsx)(D.a,{variant:"h1",children:"All Steps Complete"}),Object(B.jsx)("br",{}),Object(B.jsx)(D.a,{children:"This is your new question will look like:"}),Object(B.jsx)(at,{question:c}),Object(B.jsx)($.a,{onClick:t,children:"Go back"}),Object(B.jsx)($.a,{variant:"contained",onClick:function(){u(""),O(!0);var e,t={requiresPiano:c.requiresPiano,text:c.text,image:c.image,options:c.options,type:(e=c.type.replace("_"," ").toLocaleLowerCase(),e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")),points:c.points,answer:c.answer,answerArr:c.answerArr,answerHint:c.answerHint};c.id?m({variables:{id:c.id,input:t}}).then((function(e){O(!1),n.push("/lesson/".concat(e.data.updateQuestion.lesson.id,"/true"))})).catch((function(e){O(!1),u(e.toString())})):h({variables:{lessonId:c.lessonId,input:t}}).then((function(e){O(!1),n.push("/lesson/".concat(e.data.addQuestion.lesson.id,"/true"))})).catch((function(e){O(!1),u(e.toString())}))},disabled:b,color:"primary",endIcon:b?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),children:"Save"}),Object(B.jsx)("br",{}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:l})]})},xn=[{title:"Add Question Text",name:"text",component:Object(B.jsx)(zt,{}),required:!0},{title:"Add Image",name:"image",component:Object(B.jsx)(Jt,{}),required:!1},{title:"Select Type",name:"type",component:Object(B.jsx)(nn,{}),required:!0},{title:"Add Options",name:"options",component:Object(B.jsx)(On,{}),required:!0},{title:"Select Answer",name:["answerArr","answer"],component:Object(B.jsx)(ln,{}),required:!0},{title:"Question Details",name:["points","answerHint"],component:Object(B.jsx)(dn,{}),required:!0}],mn=Object(Ye.a)((function(e){return Object(L.a)({root:{width:"100%",position:"relative"},contentWrapper:{margin:"".concat(e.spacing(2),"px auto")},buttonContainer:{position:"fixed",bottom:0,left:0,right:0,padding:e.spacing(3)},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},completed:{display:"inline-block"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})}));var gn,fn,vn,yn=function(e){var t,n=e.history,a=mn(),r=Sn(),c=Object(I.a)(r,1)[0],o=i.a.useState(0),s=Object(I.a)(o,2),l=s[0],u=s[1],j=i.a.useState(new Set),d=Object(I.a)(j,2),b=d[0],O=d[1],p=i.a.useState(new Set),h=Object(I.a)(p,2),x=h[0],m=h[1],g=i.a.useState(new Set),f=Object(I.a)(g,2),v=f[0],y=f[1],w=xn,C=function(){return xn.map((function(e){return e.title})).length},S=function(e){return!0!==w[e].required},k=function(){return v.size},A=function(){return b.size},q=function(){return A()===C()-k()},N=function(){var e=l!==C()-1||q()?l+1:xn.findIndex((function(e,t){return!b.has(t)}));u(e)},L=function(e){return function(){u(e)}};function F(e){return b.has(e)}function M(e){return x.has(e)}return Object(B.jsxs)("div",{className:a.root,children:[Object(B.jsx)(Ot.a,{alternativeLabel:!0,nonLinear:!0,activeStep:l,children:w.map((function(e,t){var n={},a={};return S(t)&&(a.optional=Object(B.jsx)(D.a,{variant:"caption",children:"Optional"})),function(e){return v.has(e)}(t)&&(n.completed=!1),Object(B.jsx)(pt.a,Object(bt.a)(Object(bt.a)({},n),{},{children:M(t)?Object(B.jsx)(ht.a,Object(bt.a)(Object(bt.a)({onClick:L(t),completed:F(t),icon:Object(B.jsx)(ee.a,{}),style:{color:"red"}},a),{},{children:e.title})):Object(B.jsx)(ht.a,Object(bt.a)(Object(bt.a)({onClick:L(t),completed:F(t)},a),{},{children:e.title}))}),e.title)}))}),Object(B.jsx)("div",{children:q()?Object(B.jsx)(hn,{history:n,handleReset:function(){u(0),O(new Set),y(new Set)}}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)("div",{className:a.contentWrapper,children:(t=l,w[t].component)}),Object(B.jsxs)(T.a,{className:a.buttonContainer,children:[Object(B.jsx)($.a,{disabled:0===l,onClick:function(){u((function(e){return e-1}))},className:a.button,children:"Back"}),S(l)&&!b.has(l)&&Object(B.jsx)($.a,{variant:"contained",color:"primary",onClick:function(){if(!S(l))throw new Error("You can't skip a step that isn't optional.");u((function(e){return e+1})),y((function(e){var t=new Set(e.values());return t.add(l),t}))},className:a.button,children:"Skip"}),l!==xn.length&&(b.has(l)?Object(B.jsx)($.a,{variant:"contained",color:"primary",onClick:N,className:a.button,children:"Next"}):Object(B.jsx)($.a,{variant:"contained",color:"primary",onClick:function(){var e=new Set(b),t=new Set(x);if(m(new Set),xn[l].required)if("string"!==typeof xn[l].name){if(xn[l].name.every((function(e){return c[e].length<1})))return t.add(l),m(t)}else{var n=xn[l].name;if(c[n].length<1)return console.log("thats gotta be an error"),t.add(l),m(t)}e.add(l),O(e),b.size!==C()-k()&&N()},children:A()===C()-1?"Finish":"Next"}))]})]})})]})},wn={lessonId:"",requiresPiano:!1,text:[],image:"",options:[],type:"",points:0,answer:"",answerArr:[],answerHint:"",questionTypeOptions:[]},Cn=Object(a.createContext)([wn,function(e){return null}]),Sn=function(){return Object(a.useContext)(Cn)},kn=function(e){var t=e.history,n=e.match,r=e.update,c=void 0===r?null:r,o=i.a.useState(wn),s=Object(I.a)(o,2),l=s[0],u=s[1],j=Object(ce.useQuery)(Ue),d=j.loading,b=j.error,O=j.data;return Object(a.useEffect)((function(){if(!d&&!b&&O&&l.questionTypeOptions.length<1){var e=Object(bt.a)(Object(bt.a)({},l),{},{questionTypeOptions:O.getQuestionTypes,lessonId:c?c.lesson.id:n.params.id});c&&((e=Object(bt.a)(Object(bt.a)({},e),{},{id:c.id,requiresPiano:c.requiresPiano||!1,image:c.image,options:c.options,type:c.type,points:c.points,answer:c.answer,answerArr:c.answerArr,answerHint:c.answerHint})).text=c.text,console.log("update!",e.text)),u(e)}}),[l,O,b,d,n.params.id,c]),Object(B.jsx)(Cn.Provider,{value:[l,u],children:Object(B.jsx)(yn,{history:t})})},An=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.match;return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/lesson/".concat(n.params.id),startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsx)(kn,{history:t,match:n})]})})),In=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=(e.classes,e.match),a=n.params.id,r=Object(ce.useQuery)(Re,{variables:{id:a}}),c=r.loading,o=r.error,s=r.data;return c?Object(B.jsx)(Oe,{}):o||!s.getQuestion?Object(B.jsx)(ne,{message:o?o.message:"Could not load Question"}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/question/".concat(n.params.id),startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsx)(kn,{history:t,match:n,update:s.getQuestion})]})})),qn=Object(q.g)((function(e){var t=e.history,n=e.match.params.id,a=Object(ce.useQuery)(Re,{variables:{id:n}}),r=a.loading,c=a.error,o=a.data;return r?Object(B.jsx)(Oe,{}):c||!o.getQuestion?Object(B.jsx)(ne,{message:c?c.message:"Could not load Question"}):Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/lesson/".concat(o.getQuestion.lesson.id),startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsx)("div",{style:{position:"relative"},children:Object(B.jsx)(it,{question:o.getQuestion,history:t,displayActions:!0,disableHeight:!1})})]})})),Nn=Object(ce.gql)(gn||(gn=Object(oe.a)(["\n  query getQuestions {\n    getQuestions {\n      id\n      title\n      level\n      createdAt\n      updatedAt\n      questions {\n        id\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]))),Ln=Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({root:{maxWidth:"800px",margin:"0 auto",height:"500px",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly"},actions:{justifyContent:"center"},fab:{position:"fixed",bottom:t(2),right:t(2)}})}))((function(e){var t=e.classes,n=e.match,a=e.history,r=Object(ce.useQuery)(Nn),c=r.loading,o=r.error,s=r.data,l=r.refetch;return n.params.newFetch&&(l(),a.push("/questions")),c?Object(B.jsx)(Oe,{}):o?Object(B.jsx)(ne,{message:o.message}):Object(B.jsxs)(i.a.Fragment,{children:[s.getQuestions.length<1?Object(B.jsx)(ne,{message:"No Questions Found"}):s.getQuestions.map((function(e){return Object(B.jsx)(it,{displayActions:!1,question:e,link:"/question/".concat(e.id)},e.id)})),Object(B.jsx)(fe.a,{className:t.fab,component:k.b,"aria-label":"Add Question",color:"secondary",to:"/create/question",children:Object(B.jsx)(Ce.a,{})})]})})),Tn=Object(ce.gql)(fn||(fn=Object(oe.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(input: { email: $email, password: $password }) {\n      token\n      expiration\n      user {\n        email\n        id\n      }\n    }\n  }\n"]))),Fn=Object(ce.gql)(vn||(vn=Object(oe.a)(["\n  mutation register($name: String!, $email: String!, $password: String!) {\n    addUser(input: { name: $name, email: $email, password: $password }) {\n      id\n      email\n    }\n  }\n"]))),Dn=[{name:"Login",link:"/login",component:Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,r=Object(a.useState)(""),c=Object(I.a)(r,2),o=c[0],s=c[1],l=Object(a.useState)(""),u=Object(I.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(""),O=Object(I.a)(b,2),p=O[0],h=O[1],x=Object(a.useState)(""),m=Object(I.a)(x,2),g=m[0],f=m[1],v=i.a.useState(!1),y=Object(I.a)(v,2),w=y[0],C=y[1],S=i.a.useState(""),A=Object(I.a)(S,2),q=A[0],N=A[1],L=Object(ce.useMutation)(Tn),Q=Object(I.a)(L,1)[0],H=function(){(function(){var e=!0;return o.length<3?(h("Email must be at least 3 characters"),e=!1):o.includes("@")&&o.includes(".")?h(""):(h("Please enter a valid email"),e=!1),j.length<6?(f("Password must be at least 6 characters"),e=!1):f(""),e})()&&(N(""),C(!0),Q({variables:{email:o,password:j}}).then((function(e){N(""),E.setUserDetails(e.data.login,(function(e){if(e)return t.push("/modules");N("The system encountered an error, please try again later")}))})).catch((function(e){C(!1),N(e.toString())})))};return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/",startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(B.jsx)(Z.a,{title:"Login"}),Object(B.jsxs)(F.a,{children:[Object(B.jsx)(ae.a,{name:"email",label:"Email",autoFocus:!0,margin:"normal",value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&H()},error:""!==p,helperText:p}),Object(B.jsx)(ae.a,{name:"password",label:"Password",type:"password",margin:"normal",value:j,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&H()},error:""!==g,helperText:g}),Object(B.jsx)("br",{}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:q}),Object(B.jsxs)(D.a,{variant:"caption",children:["Don't have an account? ",Object(B.jsx)(k.b,{to:"/register",children:"Register here"})]})]}),Object(B.jsx)(M.a,{children:Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:H,disabled:w,endIcon:w?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),children:"Login"})})]})]})})),authed:!1},{name:"Register",link:"/register",component:Object(Q.a)((function(e){var t=e.spacing;return Object(L.a)({wrapper:{padding:t(4)}})}))((function(e){var t=e.history,n=e.classes,r=Object(a.useState)(""),c=Object(I.a)(r,2),o=c[0],s=c[1],l=Object(a.useState)(""),u=Object(I.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(""),O=Object(I.a)(b,2),p=O[0],h=O[1],x=Object(a.useState)(""),m=Object(I.a)(x,2),g=m[0],f=m[1],v=Object(a.useState)(""),y=Object(I.a)(v,2),w=y[0],C=y[1],S=Object(a.useState)(""),A=Object(I.a)(S,2),q=A[0],N=A[1],L=i.a.useState(!1),Q=Object(I.a)(L,2),E=Q[0],H=Q[1],P=i.a.useState(""),z=Object(I.a)(P,2),W=z[0],U=z[1],R=Object(ce.useMutation)(Fn),_=Object(I.a)(R,1)[0],V=function(){(function(){var e=!0;return o.length<3&&(f("Name must be at least 3 characters"),e=!1),j.length<3?(C("Email must be at least 3 characters"),e=!1):j.includes("@")&&j.includes(".")?C(""):(C("Please enter a valid email"),e=!1),p.length<6?(N("Password must be at least 6 characters"),e=!1):N(""),e})()&&(U(""),H(!0),_({variables:{name:o,email:j,password:p}}).then((function(e){return U(""),t.push("/login")})).catch((function(e){H(!1),U(e.toString())})))};return Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)($.a,{component:k.b,to:"/",startIcon:Object(B.jsx)(ie.a,{}),children:"Back"}),Object(B.jsxs)(T.a,{elevation:3,className:n.wrapper,children:[Object(B.jsx)(Z.a,{title:"Register"}),Object(B.jsxs)(F.a,{children:[Object(B.jsx)(ae.a,{name:"name",label:"Name",autoFocus:!0,margin:"normal",value:o,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&V()},error:""!==g,helperText:g}),Object(B.jsx)(ae.a,{name:"email",label:"Email",autoFocus:!0,margin:"normal",value:j,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&V()},error:""!==w,helperText:w}),Object(B.jsx)(ae.a,{name:"password",label:"Password",type:"password",margin:"normal",value:p,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&V()},error:""!==q,helperText:q}),Object(B.jsx)("br",{}),Object(B.jsx)(D.a,{variant:"caption",color:"error",children:W}),Object(B.jsxs)(D.a,{variant:"caption",children:["Already have an account? ",Object(B.jsx)(k.b,{to:"/login",children:"Login here"})]})]}),Object(B.jsx)(M.a,{children:Object(B.jsx)($.a,{color:"secondary",variant:"contained",onClick:V,disabled:E,endIcon:E?Object(B.jsx)(K.a,{size:18}):Object(B.jsx)(re.a,{}),children:"Sign up"})})]})]})})),authed:!1},{name:"Create Module",link:"/create/module",component:be,authed:!0},{name:"Module",link:"/module/:id/:newFetch?",component:ot,authed:!0},{name:"Update Module",link:"/update/module/:id",component:pe,authed:!0},{name:"Modules",link:"/modules/:newFetch?",component:st,authed:!0},{name:"Create Lesson",link:"/create/lesson",component:ut,authed:!0},{name:"Lesson",link:"/lesson/:id/:newFetch?",component:jt,authed:!0},{name:"Lessons",link:"/lessons/:newFetch?",component:dt,authed:!0},{name:"Create Question",link:"/create/question/:id",component:An,authed:!0},{name:"Question",link:"/question/:id",component:qn,authed:!0},{name:"Update Question",link:"/update/question/:lessonId/:id",component:In,authed:!0},{name:"Questions",link:"/questions/:newFetch?",component:Ln,authed:!0}],Mn=function(){var e=i.a.useState(!1),t=Object(I.a)(e,2),n=t[0],r=t[1],c=Object(q.f)();return Object(a.useEffect)((function(){var e=function(e){return r(e)},t=E.isAuthenticated();e(!!t),c.listen((function(){var t=E.isAuthenticated();e(!!t)}))}),[c]),Object(B.jsxs)(i.a.Fragment,{children:[Object(B.jsx)(X,{isAuthed:n,setIsAuthed:r,history:c}),Object(B.jsx)(N.a,{container:!0,justify:"center",style:{marginTop:"20px",marginBottom:"20px"},children:Object(B.jsx)(N.a,{item:!0,xs:11,children:Object(B.jsxs)(q.c,{children:[Object(B.jsx)(q.a,{exact:!0,path:"/",component:H}),Dn.map((function(e,t){var a=e.link,i=e.component;return e.authed&&!n?Object(B.jsx)(q.a,{render:function(){return Object(B.jsx)(ne,{message:"You need to be logged in to view this page",action:function(){return c.push("/login")},actionLabel:"Login"})}},t):Object(B.jsx)(q.a,{path:a,component:i},t)})),Object(B.jsx)(q.a,{render:function(){return Object(B.jsx)(ne,{message:"The page you are looking for does not exist"})}})]})})})]})},$n=n(139),Qn=n(275),En=Object($n.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#ffc400"}},typography:{fontFamily:["quicksand","sans-serif"].join(","),h1:{fontWeight:800,fontSize:"3.052rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h2:{fontWeight:700,fontSize:"2.441rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h3:{fontWeight:700,fontSize:"1.953rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h4:{fontWeight:700,fontSize:"1.563rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h5:{fontWeight:700,fontSize:"1.25rem",color:"#4e4e4e"}},overrides:{MuiTextField:{root:{width:"100%",margin:"16px auto"}},MuiListItemText:{root:{display:"flex",flexDirection:"column-reverse"}}}}),Bn=En=Object(Qn.a)(En),Hn=function(){return Object(B.jsx)(k.a,{children:Object(B.jsx)(A.a,{theme:Bn,children:Object(B.jsx)(Mn,{})})})},Pn=new ce.ApolloClient({uri:Y.server_url+"/graphql",credentials:"include",cache:new ce.InMemoryCache});c.a.render(Object(B.jsx)(ce.ApolloProvider,{client:Pn,children:Object(B.jsx)(Hn,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):s(t,e)}))}}()}},[[170,1,2]]]);
//# sourceMappingURL=main.f4b79073.chunk.js.map